function loadData(){$.ajax({type:"GET",url:"data/server-info/get",dataType:"json",success:function(a){updateCPUUsage(a),updateRAMStatus(a),updateSWAPStatus(a),updateStorageStatus(a),createCPUCore(a),updateCPUTemperatureStatus(a)}})}function reloadData(){$.ajax({type:"GET",url:"data/server-info/get",dataType:"json",success:function(a){$(".waiting-server-up").css({display:"none"}),updateCPUUsage(a),updateRAMStatus(a),updateSWAPStatus(a),updateStorageStatus(a),updateCPUTemperatureStatus(a)}})}function createCPUCore(b){for(var d in $(".cpu-temperature-container").empty(),b.cpu.temperature){var a=b.cpu.temperature[d],c=a.label,e=100*a.value.currentTemperature/150,f='<div class="server-into-item '+c.split(" ").join("-").toLowerCase()+'">\r\n<div class="info-label">'+c+'</div>\r\n<div class="info-value">'+a.raw.currentTemperature+'</div>\r\n<div class="info-progress">\r\n  <div class="info-progress-inner" style="width:'+e+'%"></div>\r\n</div>\r\n</div>\r\n';$(".cpu-temperature-container").append(f)}}function updateCPUTemperatureStatus(b){for(var d in b.cpu.temperature){var a=b.cpu.temperature[d],e=a.label,f=100*a.value.currentTemperature/150,c=e.split(" ").join("-").toLowerCase();$(".cpu-temperature-container").find("."+c).find(".info-value").html(a.raw.currentTemperature),$(".cpu-temperature-container").find("."+c).find(".info-progress-inner").css({width:f+"%"})}}function updateRAMStatus(a){if(void 0!==a.memory.ram){(void 0===a.memory.ram.total||a.memory.ram.total<=0)&&(a.memory.ram.total=0);var b=0==a.memory.ram.total?0:100*(a.memory.ram.used/a.memory.ram.total),c=a.memory.ram.total/1048576,d=a.memory.ram.used/1048576;$(".ram").find(".info-value").text(b.toFixed(2)+"% ("+d.toFixed(2)+"GB / "+c.toFixed(2)+"GB)"),$(".ram").find(".info-progress-inner").css({width:b.toFixed(2)+"%"})}}function updateSWAPStatus(a){if(void 0!==a.memory.swap){(void 0===a.memory.swap.total||a.memory.swap.total<=0)&&(a.memory.swap.total=0);var b=0==a.memory.swap.total?0:100*(a.memory.swap.used/a.memory.swap.total),c=a.memory.swap.total/1048576,d=a.memory.swap.used/1048576;$(".swap").find(".info-value").text(b.toFixed(2)+"% ("+d.toFixed(2)+"GB / "+c.toFixed(2)+"GB)"),$(".swap").find(".info-progress-inner").css({width:b.toFixed(2)+"%"})}}function updateStorageStatus(a){(void 0===a.storage.total||a.storage.total<=0)&&(a.storage.total=0);var b=0==a.storage.total?0:100*(a.storage.used/a.storage.total),c=a.storage.total/1048576,d=a.storage.used/1048576;$(".storage").find(".info-value").text(b.toFixed(2)+"% ("+d.toFixed(2)+"GB / "+c.toFixed(2)+"GB)"),$(".storage").find(".info-progress-inner").css({width:b.toFixed(2)+"%"})}function updateCPUUsage(b){var a=b.cpu.usage.used;$(".cpu-usage").find(".info-value").text(a.toFixed(2)+"%"),$(".cpu-usage").find(".info-progress-inner").css({width:a.toFixed(2)+"%"})}$(document).ready(function(a){loadData(),setInterval(function(a){reloadData()},1e4),$(document).on("click",".service-item.service-modem .button-connect, .service-item.service-modem-sms .button-connect, .service-item.service-modem-internet .button-connect",function(b){var a="";a=$(this).closest(".service-item").hasClass("service-modem-sms")?"api/modem-sms":$(this).closest(".service-item").hasClass("service-modem-internet")?"api/modem-internet":"api/modem",$.ajax({url:a,type:"POST",data:{action:"connect"},dataType:"json",success:function(a){if("broadcast-message"==a.command)for(var b in a.data)showNotif(a.data[b].message)},error:function(a){}}),b.preventDefault()}),$(document).on("click",".service-item.service-modem .button-disconnect, .service-item.service-modem-sms .button-disconnect, .service-item.service-modem-internet .button-disconnect",function(b){var a="";a=$(this).closest(".service-item").hasClass("service-modem-sms")?"api/modem-sms":$(this).closest(".service-item").hasClass("service-modem-internet")?"api/modem-internet":"api/modem",confirm("Area you sure you want to disconnect all modems?")&&$.ajax({url:a,type:"POST",data:{action:"disconnect"},dataType:"json",success:function(a){if("broadcast-message"==a.command)for(var b in a.data)showNotif(a.data[b].message)},error:function(a){}}),b.preventDefault()}),$(document).on("click",".service-item.service-ws .button-connect",function(a){$.ajax({url:"api/subscriber-ws",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-ws .button-disconnect",function(a){confirm("Are you sure you want to stop WebSocket client?")&&$.ajax({url:"api/subscriber-ws",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-amqp .button-connect",function(a){$.ajax({url:"api/subscriber-amqp",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-amqp .button-disconnect",function(a){confirm("Are you sure you want to stop RabbitMQ client?")&&$.ajax({url:"api/subscriber-amqp",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-redis .button-connect",function(a){$.ajax({url:"api/subscriber-redis",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-redis .button-disconnect",function(a){confirm("Are you sure you want to stop Redis client?")&&$.ajax({url:"api/subscriber-redis",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-mqtt .button-connect",function(a){$.ajax({url:"api/subscriber-mqtt",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-mqtt .button-disconnect",function(a){confirm("Are you sure you want to stop Mosquitto client?")&&$.ajax({url:"api/subscriber-mqtt",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-activemq .button-connect",function(a){$.ajax({url:"api/subscriber-activemq",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-activemq .button-disconnect",function(a){confirm("Are you sure you want to stop ActiveMQ client?")&&$.ajax({url:"api/subscriber-activemq",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-stomp .button-connect",function(a){$.ajax({url:"api/subscriber-stomp",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-stomp .button-disconnect",function(a){confirm("Are you sure you want to stop Stomp client?")&&$.ajax({url:"api/subscriber-stomp",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-http .button-connect",function(a){$.ajax({url:"api/subscriber-http",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-http .button-disconnect",function(a){confirm("Are you sure you want to stop HTTP server?")&&$.ajax({url:"api/subscriber-http",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-https .button-connect",function(a){$.ajax({url:"api/subscriber-https",type:"POST",data:{action:"start"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".service-item.service-https .button-disconnect",function(a){confirm("Are you sure you want to stop HTTPS server?")&&$.ajax({url:"api/subscriber-https",type:"POST",data:{action:"stop"},dataType:"json",success:function(a){},error:function(a){}}),a.preventDefault()}),$(document).on("click",".tile.reboot a",function(a){confirm("Are you sure you want to reboot the OS?")&&(waitingForServerUp(),$.ajax({url:"api/reboot",type:"POST",data:{confirm:"yes"},dataType:"json",success:function(a){},error:function(a){}}))}),$(document).on("click",".tile.restart a",function(a){confirm("Are you sure you want to restart the service?")&&(waitingForServerUp(),$.ajax({url:"api/restart",type:"POST",data:{confirm:"yes"},dataType:"json",success:function(a){},error:function(a){}}))}),$(document).on("click",".tile.expand a",function(a){confirm("Are you sure you want expand the storage?")&&$.ajax({url:"api/expand",type:"POST",data:{confirm:"yes"},dataType:"json",success:function(a){updateCPUUsage(a),updateRAMStatus(a),updateSWAPStatus(a),updateStorageStatus(a),updateCPUTemperatureStatus(a)},error:function(a){}})}),$(document).on("click",".tile.cleaner a",function(a){confirm("Are you sure you want to clean up the service?")&&$.ajax({url:"api/cleanup",type:"POST",data:{confirm:"yes"},dataType:"json",success:function(a){console.log("DATA : "+JSON.stringify(a))}})})})