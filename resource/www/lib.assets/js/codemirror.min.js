!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):b.CodeMirror=a()}(this,function(){"use strict";var h=navigator.userAgent,J=navigator.platform,K=/gecko\/\d/i.test(h),L=/MSIE \d/.test(h),M=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(h),q=/Edge\/(\d+)/.exec(h),w=L||M||q,U=w&&(L?document.documentMode||6:+(q||M)[1]),N=!q&&/WebKit\//.test(h),V=N&&/Qt\/\d+\.\d+/.test(h),W=!q&&/Chrome\//.test(h),C=/Opera\//.test(h),X=/Apple Computer/.test(navigator.vendor),a0=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(h),a1=/PhantomJS/.test(h),D=!q&&/AppleWebKit/.test(h)&&/Mobile\/\w+/.test(h),Y=/Android/.test(h),Z=D||Y||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(h),O=D||/Mac/.test(J),a2=/\bCrOS\b/.test(h),aa=/win/i.test(J),n=C&&h.match(/Version\/(\d*\.\d*)/);(n=n&&Number(n[1]))&&15<=n&&(N=(C=!1,!0));var a3=O&&(V||C&&(null==n||n<12.11)),a4=K||w&&9<=U;function a5(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var ab,ac=function(c,e){var b=c.className,a=a5(e).exec(b);if(a){var d=b.slice(a.index+a[0].length);c.className=b.slice(0,a.index)+(d?a[1]+d:"")}};function a6(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function a7(a,b){return a6(a).appendChild(b)}function ad(f,a,d,e){var b=document.createElement(f);if(d&&(b.className=d),e&&(b.style.cssText=e),"string"==typeof a)b.appendChild(document.createTextNode(a));else if(a)for(var c=0;c<a.length;++c)b.appendChild(a[c]);return b}function a8(b,c,d,e){var a=ad(b,c,d,e);return a.setAttribute("role","presentation"),a}function ae(b,a){if(3==a.nodeType&&(a=a.parentNode),b.contains)return b.contains(a);do if(11==a.nodeType&&(a=a.host),a==b)return!0;while(a=a.parentNode)}function a9(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function af(a,b){var c=a.className;a5(b).test(c)||(a.className+=(c?" ":"")+b)}function ba(d,c){for(var b=d.split(" "),a=0;a<b.length;a++)b[a]&&!a5(b[a]).test(c)&&(c+=" "+b[a]);return c}ab=document.createRange?function(b,c,d,e){var a=document.createRange();return a.setEnd(e||b,d),a.setStart(b,c),a}:function(b,c,d){var a=document.body.createTextRange();try{a.moveToElementText(b.parentNode)}catch(e){return a}return a.collapse(!0),a.moveEnd("character",d),a.moveStart("character",c),a};var P=function(a){a.select()};function bb(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function bc(c,a,d){for(var b in a=a||{},c)!c.hasOwnProperty(b)|| !1===d&&a.hasOwnProperty(b)||(a[b]=c[b]);return a}function ag(e,a,f,g,h){null==a&& -1==(a=e.search(/[^\s\u00a0]/))&&(a=e.length);for(var b=g||0,c=h||0;;){var d=e.indexOf("	",b);if(d<0||a<=d)return c+(a-b);c+=d-b,c+=f-c%f,b=d+1}}D?P=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:w&&(P=function(a){try{a.select()}catch(b){}});var Q=function(){this.id=null};function ah(b,c){for(var a=0;a<b.length;++a)if(b[a]==c)return a;return -1}Q.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var ai={toString:function(){return"CodeMirror.Pass"}},bd={scroll:!1},be={origin:"*mouse"},bf={origin:"+move"};function aj(d,e,f){for(var a=0,c=0;;){var b=d.indexOf("	",a);-1==b&&(b=d.length);var g=b-a;if(b==d.length||e<=c+g)return a+Math.min(g,e-c);if(c+=b-a,a=b+1,e<=(c+=f-c%f))return a}}var bg=[""];function _(a){for(;bg.length<=a;)bg.push($(bg)+" ");return bg[a]}function $(a){return a[a.length-1]}function bh(b,d){for(var c=[],a=0;a<b.length;a++)c[a]=d(b[a],a);return c}function bi(){}function ak(b,c){var a;return a=Object.create?Object.create(b):(bi.prototype=b,new bi),c&&bc(c,a),a}var bj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function al(a){return/\w/.test(a)||"\x80"<a&&(a.toUpperCase()!=a.toLowerCase()||bj.test(a))}function bk(a,b){return b?!!(-1<b.source.indexOf("\\w")&&al(a))||b.test(a):al(a)}function bl(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}var bm=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function bn(a){return 768<=a.charCodeAt(0)&&bm.test(a)}function bo(b,a,c){for(;(c<0?0<a:a<b.length)&&bn(b.charAt(a));)a+=c;return a}function bp(d,a,b){for(var e=b<a?-1:1;;){if(a==b)return a;var f=(a+b)/2,c=e<0?Math.ceil(f):Math.floor(f);if(c==a)return d(c)?a:b;d(c)?b=c:a=c+e}}var bq=null;function br(e,c,f){var d;bq=null;for(var a=0;a<e.length;++a){var b=e[a];if(b.from<c&&b.to>c)return a;b.to==c&&(b.from!=b.to&&"before"==f?d=a:bq=a),b.from==c&&(b.from!=b.to&&"before"!=f?d=a:bq=a)}return null!=d?d:bq}var am,an,ao,ap,aq,ar,as,bs=(am="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",an="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",ao=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,ap=/[stwN]/,aq=/[LRr]/,ar=/[Lb1n]/,as=/[1n]/,function(l,r){var m="ltr"==r?"L":"R";if(0==l.length||"ltr"==r&&!ao.test(l))return!1;for(var e,c=l.length,a=[],u=0;u<c;++u)a.push((e=l.charCodeAt(u))<=247?am.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?an.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L");for(var s=0,B=m;s<c;++s){var C=a[s];"m"==C?a[s]=B:B=C}for(var q=0,D=m;q<c;++q){var v=a[q];"1"==v&&"r"==D?a[q]="n":aq.test(v)&&"r"==(D=v)&&(a[q]="R")}for(var k=1,n=a[0];k<c-1;++k){var w=a[k];"+"==w&&"1"==n&&"1"==a[k+1]?a[k]="1":","!=w||n!=a[k+1]||"1"!=n&&"n"!=n||(a[k]=n),n=w}for(var g=0;g<c;++g){var E=a[g];if(","==E)a[g]="N";else if("%"==E){var h=void 0;for(h=g+1;h<c&&"%"==a[h];++h);for(var H=g&&"!"==a[g-1]||h<c&&"1"==a[h]?"1":"N",x=g;x<h;++x)a[x]=H;g=h-1}}for(var t=0,F=m;t<c;++t){var y=a[t];"L"==F&&"1"==y?a[t]="L":aq.test(y)&&(F=y)}for(var i=0;i<c;++i)if(ap.test(a[i])){var j=void 0;for(j=i+1;j<c&&ap.test(a[j]);++j);for(var G="L"==(i?a[i-1]:m),I=G==("L"==(j<c?a[j]:m))?G?"L":"R":m,z=i;z<j;++z)a[z]=I;i=j-1}for(var o,d=[],b=0;b<c;)if(ar.test(a[b])){var J=b;for(++b;b<c&&ar.test(a[b]);++b);d.push(new bt(0,J,b))}else{var p=b,A=d.length;for(++b;b<c&&"L"!=a[b];++b);for(var f=p;f<b;)if(as.test(a[f])){p<f&&d.splice(A,0,new bt(1,p,f));var K=f;for(++f;f<b&&as.test(a[f]);++f);d.splice(A,0,new bt(2,K,f)),p=f}else++f;p<b&&d.splice(A,0,new bt(1,p,b))}return"ltr"==r&&(1==d[0].level&&(o=l.match(/^\s+/))&&(d[0].from=o[0].length,d.unshift(new bt(0,0,o[0].length))),1==$(d).level&&(o=l.match(/\s+$/))&&($(d).to-=o[0].length,d.push(new bt(0,c-o[0].length,c)))),"rtl"==r?d.reverse():d});function bt(a,b,c){this.level=a,this.from=b,this.to=c}function bu(a,c){var b=a.order;return null==b&&(b=a.order=bs(a.text,c)),b}var bv=[],at=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={});d[b]=(d[b]||bv).concat(c)}};function bw(a,b){return a._handlers&&a._handlers[b]||bv}function au(a,b,d){if(a.removeEventListener)a.removeEventListener(b,d,!1);else if(a.detachEvent)a.detachEvent("on"+b,d);else{var e=a._handlers,c=e&&e[b];if(c){var f=ah(c,d);-1<f&&(e[b]=c.slice(0,f).concat(c.slice(f+1)))}}}function av(c,d){var a=bw(c,d);if(a.length)for(var e=Array.prototype.slice.call(arguments,2),b=0;b<a.length;++b)a[b].apply(null,e)}function bx(b,a,c){return"string"==typeof a&&(a={type:a,preventDefault:function(){this.defaultPrevented=!0}}),av(b,c||a.type,b,a),bA(a)||a.codemirrorIgnore}function by(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var d=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),c=0;c<b.length;++c)-1==ah(d,b[c])&&d.push(b[c])}function bz(a,b){return 0<bw(a,b).length}function o(a){a.prototype.on=function(a,b){at(this,a,b)},a.prototype.off=function(a,b){au(this,a,b)}}function aw(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ax(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function bA(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ay(a){aw(a),ax(a)}function bB(a){return a.target||a.srcElement}function bC(b){var a=b.which;return null==a&&(1&b.button?a=1:2&b.button?a=3:4&b.button&&(a=2)),O&&b.ctrlKey&&1==a&&(a=3),a}var bD,bE,bF=function(){if(w&&U<9)return!1;var a=ad("div");return"draggable"in a||"dragDrop"in a}();function bG(b){if(null==bD){var a=ad("span","\u200B");a7(b,ad("span",[a,document.createTextNode("x")])),0!=b.firstChild.offsetHeight&&(bD=a.offsetWidth<=1&&2<a.offsetHeight&&!(w&&U<8))}var c=bD?ad("span","\u200B"):ad("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}function bH(b){if(null!=bE)return bE;var c=a7(b,document.createTextNode("A\u062EA")),a=ab(c,0,1).getBoundingClientRect(),d=ab(c,1,2).getBoundingClientRect();return a6(b),!(!a||a.left==a.right)&&(bE=d.right-a.right<3)}var E,az=3!="\n\nb".split(/\n/).length?function(b){for(var c=0,d=[],g=b.length;c<=g;){var a=b.indexOf("\n",c);-1==a&&(a=b.length);var e=b.slice(c,"\r"==b.charAt(a-1)?a-1:a),f=e.indexOf("\r");-1!=f?(d.push(e.slice(0,f)),c+=f+1):(d.push(e),c=a+1)}return d}:function(a){return a.split(/\r\n?|\n/)},bI=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(b){var a;try{a=b.ownerDocument.selection.createRange()}catch(c){}return!(!a||a.parentElement()!=b)&&0!=a.compareEndPoints("StartToEnd",a)},bJ="oncopy"in(E=ad("div"))||(E.setAttribute("oncopy","return;"),"function"==typeof E.oncopy),bK=null,aA={},aB={};function aC(a){if("string"==typeof a&&aB.hasOwnProperty(a))a=aB[a];else if(a&&"string"==typeof a.name&&aB.hasOwnProperty(a.name)){var b=aB[a.name];"string"==typeof b&&(b={name:b}),(a=ak(b,a)).name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return aC("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return aC("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function aD(e,a){var f=aA[(a=aC(a)).name];if(!f)return aD(e,"text/plain");var b=f(e,a);if(aE.hasOwnProperty(a.name)){var d=aE[a.name];for(var c in d)d.hasOwnProperty(c)&&(b.hasOwnProperty(c)&&(b["_"+c]=b[c]),b[c]=d[c])}if(b.name=a.name,a.helperType&&(b.helperType=a.helperType),a.modeProps)for(var g in a.modeProps)b[g]=a.modeProps[g];return b}var aE={};function aF(c,a){if(!0===a)return a;if(c.copyState)return c.copyState(a);var d={};for(var e in a){var b=a[e];b instanceof Array&&(b=b.concat([])),d[e]=b}return d}function aG(a,c){for(var b;a.innerMode&&(b=a.innerMode(c))&&b.mode!=a;)c=b.state,a=b.mode;return b||{mode:a,state:c}}function aH(a,b,c){return!a.startState||a.startState(b,c)}var f=function(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};function bL(b,a){if((a-=b.first)<0||a>=b.size)throw new Error("There is no line "+(a+b.first)+" in the document.");for(var c=b;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(a<f){c=e;break}a-=f}return c.lines[a]}function bM(b,a,c){var d=[],e=a.line;return b.iter(a.line,c.line+1,function(f){var b=f.text;e==c.line&&(b=b.slice(0,c.ch)),e==a.line&&(b=b.slice(a.ch)),d.push(b),++e}),d}function bN(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function bO(b,d){var c=d-b.height;if(c)for(var a=b;a;a=a.parent)a.height+=c}function bP(c){if(null==c.parent)return null;for(var a=c.parent,e=ah(a.lines,c),b=a.parent;b;b=(a=b).parent)for(var d=0;b.children[d]!=a;++d)e+=b.children[d].chunkSize();return e+a.first}function bQ(a,b){var d=a.first;e:do{for(var e=0;e<a.children.length;++e){var f=a.children[e],g=f.height;if(b<g){a=f;continue e}b-=g,d+=f.chunkSize()}return d}while(!a.lines)for(var c=0;c<a.lines.length;++c){var h=a.lines[c].height;if(b<h)break;b-=h}return d+c}function bR(a,b){return b>=a.first&&b<a.first+a.size}function bS(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function aI(b,c,a){if(void 0===a&&(a=null),!(this instanceof aI))return new aI(b,c,a);this.line=b,this.ch=c,this.sticky=a}function aJ(a,b){return a.line-b.line||a.ch-b.ch}function bT(a,b){return a.sticky==b.sticky&&0==aJ(a,b)}function bU(a){return aI(a.line,a.ch)}function bV(a,b){return 0>aJ(a,b)?b:a}function bW(a,b){return 0>aJ(a,b)?a:b}function bX(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function bY(a,c){if(c.line<a.first)return aI(a.first,0);var b,e,d,f=a.first+a.size-1;return c.line>f?aI(f,bL(a,f).text.length):(b=c,e=bL(a,c.line).text.length,d=b.ch,null==d||e<d?aI(b.line,e):d<0?aI(b.line,0):b)}function bZ(d,b){for(var c=[],a=0;a<b.length;a++)c[a]=bY(d,b[a]);return c}f.prototype.eol=function(){return this.pos>=this.string.length},f.prototype.sol=function(){return this.pos==this.lineStart},f.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},f.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},f.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},f.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b},f.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},f.prototype.skipToEnd=function(){this.pos=this.string.length},f.prototype.skipTo=function(b){var a=this.string.indexOf(b,this.pos);if(-1<a)return this.pos=a,!0},f.prototype.backUp=function(a){this.pos-=a},f.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ag(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ag(this.string,this.lineStart,this.tabSize):0)},f.prototype.indentation=function(){return ag(this.string,null,this.tabSize)-(this.lineStart?ag(this.string,this.lineStart,this.tabSize):0)},f.prototype.match=function(a,c,e){if("string"!=typeof a){var b=this.string.slice(this.pos).match(a);return b&&0<b.index?null:(b&& !1!==c&&(this.pos+=b[0].length),b)}function d(a){return e?a.toLowerCase():a}if(d(this.string.substr(this.pos,a.length))==d(a))return!1!==c&&(this.pos+=a.length),!0},f.prototype.current=function(){return this.string.slice(this.start,this.pos)},f.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}},f.prototype.lookAhead=function(b){var a=this.lineOracle;return a&&a.lookAhead(b)},f.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var b$=function(a,b){this.state=a,this.lookAhead=b},r=function(a,b,c,d){this.state=b,this.doc=a,this.line=c,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};function b_(a,e,d,f){var g=[a.state.modeGen],b={};b8(a,e.text,a.doc.mode,d,function(a,b){return g.push(a,b)},b,f);for(var h=d.state,c=0;c<a.state.overlays.length;++c)!function(c){d.baseTokens=g;var f=a.state.overlays[c],i=1,j=0;d.state=!0,b8(a,e.text,f.mode,d,function(b,c){for(var a=i;j<b;){var d=g[i];b<d&&g.splice(i,1,b,g[i+1],d),i+=2,j=Math.min(b,d)}if(c){if(f.opaque)g.splice(a,i-a,b,"overlay "+c),i=a+2;else for(;a<i;a+=2){var e=g[a+1];g[a+1]=(e?e+" ":"")+"overlay "+c}}},b),d.state=h,d.baseTokens=null,d.baseTokenPos=1}(c);return{styles:g,classes:b.bgClass||b.textClass?b:null}}function b0(b,a,f){if(!a.styles||a.styles[0]!=b.state.modeGen){var c=b1(b,bP(a)),d=a.text.length>b.options.maxHighlightLength&&aF(b.doc.mode,c.state),e=b_(b,a,c);d&&(c.state=d),a.stateAfter=c.save(!d),a.styles=e.styles,e.classes?a.styleClasses=e.classes:a.styleClasses&&(a.styleClasses=null),f===b.doc.highlightFrontier&&(b.doc.modeFrontier=Math.max(b.doc.modeFrontier,++b.doc.highlightFrontier))}return a.styles}function b1(c,d,e){var a=c.doc,h=c.display;if(!a.mode.startState)return new r(a,!0,d);var b=function(c,f,g){for(var h,d,b=c.doc,k=g?-1:f-(c.doc.mode.innerMode?1e3:100),a=f;k<a;--a){if(a<=b.first)return b.first;var i=bL(b,a-1),e=i.stateAfter;if(e&&(!g||a+(e instanceof b$?e.lookAhead:0)<=b.modeFrontier))return a;var j=ag(i.text,null,c.options.tabSize);(null==d||j<h)&&(d=a-1,h=j)}return d}(c,d,e),f=b>a.first&&bL(a,b-1).stateAfter,g=f?r.fromSaved(a,f,b):new r(a,aH(a.mode),b);return a.iter(b,d,function(b){b2(c,b.text,g);var a=g.line;b.stateAfter=a==d-1||a%5==0||a>=h.viewFrom&&a<h.viewTo?g.save():null,g.nextLine()}),e&&(a.modeFrontier=g.line),g}function b2(c,d,b,g){var e=c.doc.mode,a=new f(d,c.options.tabSize,b);for(a.start=a.pos=g||0,""==d&&b3(e,b.state);!a.eol();)b4(e,a,b.state),a.start=a.pos}function b3(a,c){if(a.blankLine)return a.blankLine(c);if(a.innerMode){var b=aG(a,c);return b.mode.blankLine?b.mode.blankLine(b.state):void 0}}function b4(a,b,c,d){for(var e=0;e<10;e++){d&&(d[0]=aG(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw new Error("Mode "+a.name+" failed to advance stream.")}r.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a),b},r.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},r.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},r.fromSaved=function(a,b,c){return b instanceof b$?new r(a,aF(a.mode,b.state),c,b.lookAhead):new r(a,aF(a.mode,b),c)},r.prototype.save=function(b){var a=!1!==b?aF(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new b$(a,this.maxLookAhead):a};var b5=function(a,b,c){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=b||null,this.state=c};function b6(g,b,j,c){var h,i,d=g.doc,k=d.mode,l=bL(d,(b=bY(d,b)).line),e=b1(g,b.line,j),a=new f(l.text,g.options.tabSize,e);for(c&&(i=[]);(c||a.pos<b.ch)&&!a.eol();)a.start=a.pos,h=b4(k,a,e.state),c&&i.push(new b5(a,h,aF(d.mode,e.state)));return c?i:new b5(a,h,e.state)}function b7(b,c){if(b)for(;;){var a=b.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;b=b.slice(0,a.index)+b.slice(a.index+a[0].length);var d=a[1]?"bgClass":"textClass";null==c[d]?c[d]=a[2]:new RegExp("(?:^|s)"+a[2]+"(?:$|s)").test(c[d])||(c[d]+=" "+a[2])}return b}function b8(d,e,j,g,m,n,p){var h=j.flattenSpans;null==h&&(h=d.options.flattenSpans);var b,c=0,i=null,a=new f(e,d.options.tabSize,g),k=d.options.addModeClass&&[null];for(""==e&&b7(b3(j,g.state),n);!a.eol();){if(b=a.pos>d.options.maxHighlightLength?(h=!1,p&&b2(d,e,g,a.pos),a.pos=e.length,null):b7(b4(j,a,g.state,k),n),k){var l=k[0].name;l&&(b="m-"+(b?l+" "+b:l))}if(!h||i!=b){for(;c<a.start;)m(c=Math.min(a.start,c+5e3),i);i=b}a.start=a.pos}for(;c<a.pos;){var o=Math.min(a.pos,c+5e3);m(o,i),c=o}}var b9=!1,ca=!1;function cb(a,b,c){this.marker=a,this.from=b,this.to=c}function cc(a,d){if(a)for(var b=0;b<a.length;++b){var c=a[b];if(c.marker==d)return c}}function cd(b,d){for(var c,a=0;a<b.length;++a)b[a]!=d&&(c=c||[]).push(b[a]);return c}function ce(f,b){if(b.full)return null;var p=bR(f,b.from.line)&&bL(f,b.from.line).markedSpans,q=bR(f,b.to.line)&&bL(f,b.to.line).markedSpans;if(!p&&!q)return null;var j=b.from.ch,u=b.to.ch,r=0==aJ(b.from,b.to),a=function(d,b,g){var e;if(d)for(var f=0;f<d.length;++f){var a=d[f],c=a.marker;if(null==a.from||(c.inclusiveLeft?a.from<=b:a.from<b)||a.from==b&&"bookmark"==c.type&&(!g||!a.marker.insertLeft)){var h=null==a.to||(c.inclusiveRight?a.to>=b:a.to>b);(e=e||[]).push(new cb(c,a.from,h?null:a.to))}}return e}(p,j,r),c=function(d,b,g){var e;if(d)for(var f=0;f<d.length;++f){var a=d[f],c=a.marker;if(null==a.to||(c.inclusiveRight?a.to>=b:a.to>b)||a.from==b&&"bookmark"==c.type&&(!g||a.marker.insertLeft)){var h=null==a.from||(c.inclusiveLeft?a.from<=b:a.from<b);(e=e||[]).push(new cb(c,h?null:a.from-b,null==a.to?null:a.to-b))}}return e}(q,u,r),e=1==b.text.length,g=$(b.text).length+(e?j:0);if(a)for(var k=0;k<a.length;++k){var h=a[k];if(null==h.to){var l=cc(c,h.marker);l?e&&(h.to=null==l.to?null:l.to+g):h.to=j}}if(c)for(var m=0;m<c.length;++m){var d=c[m];(null!=d.to&&(d.to+=g),null==d.from)?cc(a,d.marker)||(d.from=g,e&&(a=a||[]).push(d)):(d.from+=g,e&&(a=a||[]).push(d))}a=a&&cf(a),c&&c!=a&&(c=cf(c));var n=[a];if(!e){var o,s=b.text.length-2;if(0<s&&a)for(var i=0;i<a.length;++i)null==a[i].to&&(o=o||[]).push(new cb(a[i].marker,null,null));for(var t=0;t<s;++t)n.push(o);n.push(c)}return n}function cf(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&& !1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function cg(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function ch(c,a){if(a){for(var b=0;b<a.length;++b)a[b].marker.attachLine(c);c.markedSpans=a}}function ci(a){return a.inclusiveLeft?-1:0}function cj(a){return a.inclusiveRight?1:0}function ck(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=aJ(d.from,e.from)||ci(a)-ci(b);return f?-f:aJ(d.to,e.to)||cj(a)-cj(b)||b.id-a.id}function cl(e,f){var b,c=ca&&e.markedSpans;if(c)for(var a=void 0,d=0;d<c.length;++d)(a=c[d]).marker.collapsed&&null==(f?a.from:a.to)&&(!b||0>ck(b,a.marker))&&(b=a.marker);return b}function cm(a){return cl(a,!0)}function cn(a){return cl(a,!1)}function co(f,e){var b,c=ca&&f.markedSpans;if(c)for(var d=0;d<c.length;++d){var a=c[d];a.marker.collapsed&&(null==a.from||a.from<e)&&(null==a.to||a.to>e)&&(!b||0>ck(b,a.marker))&&(b=a.marker)}return b}function cp(j,k,e,f,c){var l=bL(j,k),g=ca&&l.markedSpans;if(g)for(var h=0;h<g.length;++h){var a=g[h];if(a.marker.collapsed){var b=a.marker.find(0),d=aJ(b.from,e)||ci(a.marker)-ci(c),i=aJ(b.to,f)||cj(a.marker)-cj(c);if(!(0<=d&&i<=0||d<=0&&0<=i)&&(d<=0&&(a.marker.inclusiveRight&&c.inclusiveLeft?0<=aJ(b.to,e):0<aJ(b.to,e))||0<=d&&(a.marker.inclusiveRight&&c.inclusiveLeft?0>=aJ(b.from,f):0>aJ(b.from,f))))return!0}}}function cq(a){for(var b;b=cm(a);)a=b.find(-1,!0).line;return a}function cr(d,a){var b=bL(d,a),c=cq(b);return b==c?a:bP(c)}function cs(c,a){if(a>c.lastLine())return a;var d,b=bL(c,a);if(!ct(c,b))return a;for(;d=cn(b);)b=d.find(1,!0).line;return bP(b)+1}function ct(e,d){var b=ca&&d.markedSpans;if(b){for(var a=void 0,c=0;c<b.length;++c)if((a=b[c]).marker.collapsed&&(null==a.from|| !a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&cu(e,d,a)))return!0}}function cu(e,c,a){if(null==a.to){var f=a.marker.find(1,!0);return cu(e,f.line,cc(f.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==c.text.length)return!0;for(var b=void 0,d=0;d<c.markedSpans.length;++d)if((b=c.markedSpans[d]).marker.collapsed&&!b.marker.widgetNode&&b.from==a.to&&(null==b.to||b.to!=a.from)&&(b.marker.inclusiveLeft||a.marker.inclusiveRight)&&cu(e,c,b))return!0}function cv(c){for(var d=0,a=(c=cq(c)).parent,e=0;e<a.lines.length;++e){var g=a.lines[e];if(g==c)break;d+=g.height}for(var b=a.parent;b;b=(a=b).parent)for(var f=0;f<b.children.length;++f){var h=b.children[f];if(h==a)break;d+=h.height}return d}function cw(b){if(0==b.height)return 0;for(var c,d=b.text.length,a=b;c=cm(a);){var e=c.find(0,!0);a=e.from.line,d+=e.from.ch-e.to.ch}for(a=b;c=cn(a);){var f=c.find(0,!0);d-=a.text.length-f.from.ch,d+=(a=f.to.line).text.length-f.to.ch}return d}function cx(c){var a=c.display,b=c.doc;a.maxLine=bL(b,b.first),a.maxLineLength=cw(a.maxLine),a.maxLineChanged=!0,b.iter(function(b){var c=cw(b);c>a.maxLineLength&&(a.maxLineLength=c,a.maxLine=b)})}var F=function(b,c,a){this.text=b,ch(this,c),this.height=a?a(this):1};F.prototype.lineNo=function(){return bP(this)},o(F);var cy={},cz={};function cA(a,c){if(!a||/^\s*$/.test(a))return null;var b=c.addModeClass?cz:cy;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function cB(c,b){var g=a8("span",null,null,N?"padding-right: .1px":null),a={pre:a8("pre",[g],"CodeMirror-line"),content:g,col:0,pos:0,cm:c,trailingSpace:!1,splitSpaces:c.getOption("lineWrapping")};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var d=e?b.rest[e-1]:b.line,h=void 0;a.pos=0,a.addToken=cC,bH(c.display.measure)&&(h=bu(d,c.doc.direction))&&(a.addToken=cD(a.addToken,h)),a.map=[],cF(d,a,b0(c,d,b!=c.display.externalMeasured&&bP(d))),d.styleClasses&&(d.styleClasses.bgClass&&(a.bgClass=ba(d.styleClasses.bgClass,a.bgClass||"")),d.styleClasses.textClass&&(a.textClass=ba(d.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(bG(c.display.measure))),0==e?(b.measure.map=a.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(a.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(N){var f=a.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return av(c,"renderLine",c,b.line,a.pre),a.pre.className&&(a.textClass=ba(a.pre.className,a.textClass||"")),a}function cC(a,c,p,j,k,q,i){if(c){var b,l=a.splitSpaces?function(a,f){if(1<a.length&&!/  /.test(a))return a;for(var d=f,e="",b=0;b<a.length;b++){var c=a.charAt(b);" "==c&&d&&(b==a.length-1||32==a.charCodeAt(b+1))&&(c="\xa0"),e+=c,d=" "==c}return e}(c,a.trailingSpace):c,m=a.cm.state.specialChars,r=!1;if(m.test(c)){b=document.createDocumentFragment();for(var f=0;;){m.lastIndex=f;var d=m.exec(c),g=d?d.index-f:c.length-f;if(g){var n=document.createTextNode(l.slice(f,f+g));w&&U<9?b.appendChild(ad("span",[n])):b.appendChild(n),a.map.push(a.pos,a.pos+g,n),a.col+=g,a.pos+=g}if(!d)break;f+=1+g;var e=void 0;if("	"==d[0]){var s=a.cm.options.tabSize,t=s-a.col%s;(e=b.appendChild(ad("span",_(t),"cm-tab"))).setAttribute("role","presentation"),e.setAttribute("cm-text","	"),a.col+=t}else"\r"==d[0]||"\n"==d[0]?(e=b.appendChild(ad("span","\r"==d[0]?"\u240D":"\u2424","cm-invalidchar"))).setAttribute("cm-text",d[0]):((e=a.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),w&&U<9?b.appendChild(ad("span",[e])):b.appendChild(e)),a.col+=1;a.map.push(a.pos,a.pos+1,e),a.pos++}}else a.col+=c.length,b=document.createTextNode(l),a.map.push(a.pos,a.pos+c.length,b),w&&U<9&&(r=!0),a.pos+=c.length;if(a.trailingSpace=32==l.charCodeAt(c.length-1),p||j||k||r||q){var o=p||"";j&&(o+=j),k&&(o+=k);var u=ad("span",[b],o,q);if(i)for(var h in i)i.hasOwnProperty(h)&&"style"!=h&&"class"!=h&&u.setAttribute(h,i[h]);return a.content.appendChild(u)}a.content.appendChild(b)}}function cD(a,b){return function(g,e,f,h,l,j,k){f=f?f+" cm-force-border":"cm-force-border";for(var c=g.pos,m=c+e.length;;){for(var d=void 0,i=0;i<b.length&&!((d=b[i]).to>c&&d.from<=c);i++);if(d.to>=m)return a(g,e,f,h,l,j,k);a(g,e.slice(0,d.to-c),f,h,null,j,k),h=null,e=e.slice(d.to-c),c=d.to}}}function cE(a,c,d,e){var b=!e&&d.widgetNode;b&&a.map.push(a.pos,a.pos+c,b),!e&&a.cm.display.input.needsContentAttribute&&(b=b||a.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",d.id),b&&(a.cm.display.input.setUneditable(b),a.content.appendChild(b)),a.pos+=c,a.trailingSpace=!1}function cF(A,f,j){var s=A.markedSpans,t=A.text,m=0;if(s)for(var u,k,n,o,p,d,h,v=t.length,a=0,B=1,g="",e=0;;){if(e==a){n=o=p=k="",d=h=null,e=1/0;for(var w=[],i=void 0,x=0;x<s.length;++x){var c=s[x],b=c.marker;if("bookmark"==b.type&&c.from==a&&b.widgetNode)w.push(b);else if(c.from<=a&&(null==c.to||c.to>a||b.collapsed&&c.to==a&&c.from==a)){if(null!=c.to&&c.to!=a&&e>c.to&&(e=c.to,o=""),b.className&&(n+=" "+b.className),b.css&&(k=(k?k+";":"")+b.css),b.startStyle&&c.from==a&&(p+=" "+b.startStyle),b.endStyle&&c.to==e&&(i=i||[]).push(b.endStyle,c.to),b.title&&((h=h||{}).title=b.title),b.attributes)for(var C in b.attributes)(h=h||{})[C]=b.attributes[C];b.collapsed&&(!d||0>ck(d.marker,b))&&(d=c)}else c.from>a&&e>c.from&&(e=c.from)}if(i)for(var q=0;q<i.length;q+=2)i[q+1]==e&&(o+=" "+i[q]);if(!d||d.from==a)for(var y=0;y<w.length;++y)cE(f,0,w[y]);if(d&&(d.from||0)==a){if(cE(f,(null==d.to?v+1:d.to)-a,d.marker,null==d.from),null==d.to)return;d.to==a&&(d=!1)}}if(v<=a)break;for(var l=Math.min(v,e);;){if(g){var z=a+g.length;if(!d){var D=l<z?g.slice(0,l-a):g;f.addToken(f,D,u?u+n:n,p,a+D.length==e?o:"",k,h)}if(l<=z){g=g.slice(l-a),a=l;break}a=z,p=""}g=t.slice(m,m=j[B++]),u=cA(j[B++],f.cm.options)}}else for(var r=1;r<j.length;r+=2)f.addToken(f,t.slice(m,m=j[r]),cA(j[r+1],f.cm.options))}function cG(b,a,c){this.line=a,this.rest=function(a){for(var c,b;c=cn(a);)a=c.find(1,!0).line,(b=b||[]).push(a);return b}(a),this.size=this.rest?bP($(this.rest))-c+1:1,this.node=this.text=null,this.hidden=ct(b,a)}function cH(b,f,g){for(var c,d=[],a=f;a<g;a=c){var e=new cG(b.doc,bL(b.doc,a),a);c=a+e.size,d.push(e)}return d}var cI=null,cJ=null;function cK(d,e){var c=bw(d,e);if(c.length){var a,g=Array.prototype.slice.call(arguments,2);cI?a=cI.delayedCallbacks:cJ?a=cJ:(a=cJ=[],setTimeout(cL,0));for(var f=function(b){a.push(function(){return c[b].apply(null,g)})},b=0;b<c.length;++b)f(b)}}function cL(){var b=cJ;cJ=null;for(var a=0;a<b.length;++a)b[a]()}function cM(b,a,f,e){for(var d=0;d<a.changes.length;d++){var c=a.changes[d];"text"==c?cP(b,a):"gutter"==c?cR(b,a,f,e):"class"==c?cQ(b,a):"widget"==c&&cS(b,a,e)}a.changes=null}function cN(a){return a.node==a.text&&(a.node=ad("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),w&&U<8&&(a.node.style.zIndex=2)),a.node}function cO(b,c){var a=b.display.externalMeasured;return a&&a.line==c.line?(b.display.externalMeasured=null,c.measure=a.measure,a.built):cB(b,c)}function cP(c,a){var d=a.text.className,b=cO(c,a);a.text==a.node&&(a.node=b.pre),a.text.parentNode.replaceChild(b.pre,a.text),a.text=b.pre,b.bgClass!=a.bgClass||b.textClass!=a.textClass?(a.bgClass=b.bgClass,a.textClass=b.textClass,cQ(c,a)):d&&(a.text.className=d)}function cQ(b,a){!function(d,a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=cN(a);a.background=c.insertBefore(ad("div",null,b),c.firstChild),d.display.input.setUneditable(a.background)}}(b,a),a.line.wrapClass?cN(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var c=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=c||""}function cR(b,a,i,c){if(a.gutter&&(a.node.removeChild(a.gutter),a.gutter=null),a.gutterBackground&&(a.node.removeChild(a.gutterBackground),a.gutterBackground=null),a.line.gutterClass){var j=cN(a);a.gutterBackground=ad("div",null,"CodeMirror-gutter-background "+a.line.gutterClass,"left: "+(b.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),b.display.input.setUneditable(a.gutterBackground),j.insertBefore(a.gutterBackground,a.text)}var d=a.line.gutterMarkers;if(b.options.lineNumbers||d){var k=cN(a),e=a.gutter=ad("div",null,"CodeMirror-gutter-wrapper","left: "+(b.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(b.display.input.setUneditable(e),k.insertBefore(e,a.text),a.line.gutterClass&&(e.className+=" "+a.line.gutterClass),!b.options.lineNumbers||d&&d["CodeMirror-linenumbers"]||(a.lineNumber=e.appendChild(ad("div",bS(b.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+b.display.lineNumInnerWidth+"px"))),d)for(var g=0;g<b.display.gutterSpecs.length;++g){var f=b.display.gutterSpecs[g].className,h=d.hasOwnProperty(f)&&d[f];h&&e.appendChild(ad("div",[h],"CodeMirror-gutter-elt","left: "+c.gutterLeft[f]+"px; width: "+c.gutterWidth[f]+"px"))}}}function cS(d,a,e){a.alignable&&(a.alignable=null);for(var b=a.node.firstChild,c=void 0;b;b=c)c=b.nextSibling,"CodeMirror-linewidget"==b.className&&a.node.removeChild(b);cT(d,a,e)}function cT(c,a,d){if(cU(c,a.line,a,d,!0),a.rest)for(var b=0;b<a.rest.length;b++)cU(c,a.rest[b],a,d,!1)}function cU(h,e,c,i,j){if(e.widgets)for(var f=cN(c),d=0,g=e.widgets;d<g.length;++d){var a=g[d],b=ad("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||b.setAttribute("cm-ignore-events","true"),cV(a,b,c,i),h.display.input.setUneditable(b),j&&a.above?f.insertBefore(b,c.gutter||c.text):f.appendChild(b),cK(a,"redraw")}}function cV(c,a,d,b){if(c.noHScroll){(d.alignable||(d.alignable=[])).push(a);var e=b.wrapperWidth;a.style.left=b.fixedPos+"px",c.coverGutter||(e-=b.gutterTotalWidth,a.style.paddingLeft=b.gutterTotalWidth+"px"),a.style.width=e+"px"}c.coverGutter&&(a.style.zIndex=5,a.style.position="relative",c.noHScroll||(a.style.marginLeft=-b.gutterTotalWidth+"px"))}function cW(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!ae(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;"),a7(b.display.measure,ad("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function cX(b,c){for(var a=bB(c);a!=b.wrapper;a=a.parentNode)if(!a||1==a.nodeType&&"true"==a.getAttribute("cm-ignore-events")||a.parentNode==b.sizer&&a!=b.mover)return!0}function cY(a){return a.lineSpace.offsetTop}function cZ(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function c$(a){if(a.cachedPaddingH)return a.cachedPaddingH;var c=a7(a.measure,ad("pre","x","CodeMirror-line-like")),d=window.getComputedStyle?window.getComputedStyle(c):c.currentStyle,b={left:parseInt(d.paddingLeft),right:parseInt(d.paddingRight)};return isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b),b}function c_(a){return 30-a.display.nativeBarWidth}function c0(a){return a.display.scroller.clientWidth-c_(a)-a.display.barWidth}function c1(a){return a.display.scroller.clientHeight-c_(a)-a.display.barHeight}function c2(a,d,e){if(a.line==d)return{map:a.measure.map,cache:a.measure.cache};for(var b=0;b<a.rest.length;b++)if(a.rest[b]==d)return{map:a.measure.maps[b],cache:a.measure.caches[b]};for(var c=0;c<a.rest.length;c++)if(bP(a.rest[c])>e)return{map:a.measure.maps[c],cache:a.measure.caches[c],before:!0}}function c3(a,b,c,d){return c6(a,c5(a,b),c,d)}function c4(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[dA(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function c5(b,e){var c,f,g,d,h,i=bP(e),a=c4(b,i);a&&!a.text?a=null:a&&a.changes&&(cM(b,a,i,dv(b)),b.curOp.forceUpdate=!0);var j=c2(a=a||(c=b,g=bP(f=cq(f=e)),(d=c.display.externalMeasured=new cG(c.doc,f,g)).lineN=g,h=d.built=cB(c,d),d.text=h.pre,a7(c.display.lineMeasure,h.pre),d),e,i);return{line:e,view:a,rect:null,map:j.map,cache:j.cache,before:j.before,hasHeights:!1}}function c6(e,a,c,f,g){a.before&&(c=-1);var b,d=c+(f||"");return a.cache.hasOwnProperty(d)?b=a.cache[d]:(a.rect||(a.rect=a.view.text.getBoundingClientRect()),a.hasHeights||(function(f,a,c){var d=f.options.lineWrapping,g=d&&c0(f);if(!a.measure.heights||d&&a.measure.width!=g){var h=a.measure.heights=[];if(d){a.measure.width=g;for(var e=a.text.firstChild.getClientRects(),b=0;b<e.length-1;b++){var i=e[b],j=e[b+1];2<Math.abs(i.bottom-j.bottom)&&h.push((i.bottom+j.top)/2-c.top)}}h.push(c.bottom-c.top)}}(e,a.view,a.rect),a.hasHeights=!0),(b=function(i,d,r,j){var n,a,b=c9(d.map,r,j),e=b.node,c=b.start,f=b.end,k=b.collapse;if(3==e.nodeType){for(var o=0;o<4;o++){for(;c&&bn(d.line.text.charAt(b.coverStart+c));)--c;for(;b.coverStart+f<b.coverEnd&&bn(d.line.text.charAt(b.coverStart+f));)++f;if((a=w&&U<9&&0==c&&f==b.coverEnd-b.coverStart?e.parentNode.getBoundingClientRect():da(ab(e,c,f).getClientRects(),j)).left||a.right||0==c)break;f=c,c-=1,k="right"}w&&U<11&&(a=function(d,a){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(b){if(null!=bK)return bK;var a=a7(b,ad("span","x")),c=a.getBoundingClientRect(),d=ab(a,0,1).getBoundingClientRect();return bK=1<Math.abs(c.left-d.left)}(d))return a;var b=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:a.left*b,right:a.right*b,top:a.top*c,bottom:a.bottom*c}}(i.display.measure,a))}else 0<c&&(k=j="right"),a=i.options.lineWrapping&&1<(n=e.getClientRects()).length?n["right"==j?n.length-1:0]:e.getBoundingClientRect();if(w&&U<9&&!c&&(!a|| !a.left&&!a.right)){var h=e.parentNode.getClientRects()[0];a=h?{left:h.left,right:h.left+du(i.display),top:h.top,bottom:h.bottom}:c8}for(var p=a.top-d.rect.top,q=a.bottom-d.rect.top,s=(p+q)/2,l=d.view.measure.heights,g=0;g<l.length-1&&!(s<l[g]);g++);var t=g?l[g-1]:0,u=l[g],m={left:("right"==k?a.right:a.left)-d.rect.left,right:("left"==k?a.left:a.right)-d.rect.left,top:t,bottom:u};return a.left||a.right||(m.bogus=!0),i.options.singleCursorHeightPerLine||(m.rtop=p,m.rbottom=q),m}(e,a,c,f)).bogus||(a.cache[d]=b)),{left:b.left,right:b.right,top:g?b.rtop:b.top,bottom:g?b.rbottom:b.bottom}}var c7,c8={left:0,right:0,top:0,bottom:0};function c9(b,f,i){for(var h,d,j,g,e,c,a=0;a<b.length;a+=3)if(e=b[a],c=b[a+1],f<e?(d=0,j=1,g="left"):f<c?j=(d=f-e)+1:(a==b.length-3||f==c&&b[a+3]>f)&&(d=(j=c-e)-1,c<=f&&(g="right")),null!=d){if(h=b[a+2],e==c&&i==(h.insertLeft?"left":"right")&&(g=i),"left"==i&&0==d)for(;a&&b[a-2]==b[a-3]&&b[a-1].insertLeft;)h=b[2+(a-=3)],g="left";if("right"==i&&d==c-e)for(;a<b.length-3&&b[a+3]==b[a+4]&&!b[a+5].insertLeft;)h=b[(a+=3)+2],g="right";break}return{node:h,start:d,end:j,collapse:g,coverStart:e,coverEnd:c}}function da(b,e){var a=c8;if("left"==e)for(var c=0;c<b.length&&(a=b[c]).left==a.right;c++);else for(var d=b.length-1;0<=d&&(a=b[d]).left==a.right;d--);return a}function db(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function dc(a){a.display.externalMeasure=null,a6(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)db(a.display.view[b])}function dd(a){dc(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function de(){return W&&Y?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function df(){return W&&Y?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function dg(a){var c=0;if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].above&&(c+=cW(a.widgets[b]));return c}function dh(d,e,a,b,i){if(!i){var f=dg(e);a.top+=f,a.bottom+=f}if("line"==b)return a;b=b||"local";var c=cv(e);if("local"==b?c+=cY(d.display):c-=d.display.viewOffset,"page"==b||"window"==b){var g=d.display.lineSpace.getBoundingClientRect();c+=g.top+("window"==b?0:df());var h=g.left+("window"==b?0:de());a.left+=h,a.right+=h}return a.top+=c,a.bottom+=c,a}function di(e,b,a){if("div"==a)return b;var c=b.left,d=b.top;if("page"==a)c-=de(),d-=df();else if("local"==a||!a){var f=e.display.sizer.getBoundingClientRect();c+=f.left,d+=f.top}var g=e.display.lineSpace.getBoundingClientRect();return{left:c-g.left,top:d-g.top}}function dj(a,c,d,b,e){return dh(a,b=b||bL(a.doc,c.line),c3(a,b,c.ch,e),d)}function dk(d,e,m,c,f,n){function k(e,b){var a=c6(d,f,e,b?"right":"left",n);return b?a.left=a.right:a.right=a.left,dh(d,c,a,m)}c=c||bL(d.doc,e.line),f=f||c5(d,c);var g=bu(c,d.doc.direction),a=e.ch,b=e.sticky;if(a>=c.text.length?(a=c.text.length,b="before"):a<=0&&(a=0,b="after"),!g)return k("before"==b?a-1:a,"before"==b);function h(a,c,b){return k(b?a-1:a,1==g[c].level!=b)}var l=br(g,a,b),i=bq,j=h(a,l,"before"==b);return null!=i&&(j.other=h(a,i,"before"!=b)),j}function dl(a,b){var c=0;b=bY(a.doc,b),a.options.lineWrapping||(c=du(a.display)*b.ch);var d=bL(a.doc,b.line),e=cv(d)+cY(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function dm(c,d,e,b,f){var a=aI(c,d,e);return a.xRel=f,b&&(a.outside=b),a}function dn(d,e,f){var a=d.doc;if((f+=d.display.viewOffset)<0)return dm(a.first,0,null,-1,-1);var b=bQ(a,f),i=a.first+a.size-1;if(i<b)return dm(a.first+a.size-1,bL(a,i).text.length,null,1,1);e<0&&(e=0);for(var g=bL(a,b);;){var c=ds(d,g,b,e,f),j=co(g,c.ch+(0<c.xRel||0<c.outside?1:0));if(!j)return c;var h=j.find(1);if(h.line==b)return h;g=bL(a,b=h.line)}}function dp(e,b,f,d){d-=dg(b);var a=b.text.length,c=bp(function(a){return c6(e,f,a-1).bottom<=d},a,0);return{begin:c,end:a=bp(function(a){return c6(e,f,a).top>d},c,a)}}function dq(a,b,c,d){return dp(a,b,c=c||c5(a,b),dh(a,b,c6(a,c,d),"line").top)}function dr(a,c,b,d){return!(a.bottom<=b)&&(a.top>b||(d?a.left:a.right)>c)}function ds(c,b,j,h,e){e-=cv(b);var k=c5(c,b),t=dg(b),l=0,m=b.text.length,d=!0,p=bu(b,c.doc.direction);if(p){var f=(c.options.lineWrapping?function(i,j,p,k,d,f,o){var l=dp(i,j,k,o),e=l.begin,b=l.end;/\s/.test(j.text.charAt(b-1))&&b--;for(var a=null,m=null,g=0;g<d.length;g++){var c=d[g];if(!(c.from>=b||c.to<=e)){var h=c6(i,k,1!=c.level?Math.min(b,c.to)-1:Math.max(e,c.from)).right,n=h<f?f-h+1e9:h-f;(!a||n<m)&&(a=c,m=n)}}return(a=a||d[d.length-1]).from<e&&(a={from:e,to:a.to,level:a.level}),a.to>b&&(a={from:a.from,to:b,level:a.level}),a}:function(g,h,i,j,b,k,d){var c=bp(function(e){var a=b[e],c=1!=a.level;return dr(dk(g,aI(i,c?a.to:a.from,c?"before":"after"),"line",h,j),k,d,!0)},0,b.length-1),a=b[c];if(0<c){var e=1!=a.level,f=dk(g,aI(i,e?a.from:a.to,e?"after":"before"),"line",h,j);dr(f,k,d,!0)&&f.top>d&&(a=b[c-1])}return a})(c,b,j,k,p,h,e);l=(d=1!=f.level)?f.from:f.to-1,m=d?f.to:f.from-1}var n,i,u=null,g=null,a=bp(function(b){var a=c6(c,k,b);return a.top+=t,a.bottom+=t,!!dr(a,h,e,!1)&&(a.top<=e&&a.left<=h&&(u=b,g=a),!0)},l,m),q=!1;if(g){var r=h-g.left<g.right-h,s=r==d;a=u+(s?0:1),i=s?"after":"before",n=r?g.left:g.right}else{d||a!=m&&a!=l||a++,i=0==a?"after":a==b.text.length?"before":c6(c,k,a-(d?1:0)).bottom+t<=e==d?"after":"before";var o=dk(c,aI(j,a,i),"line",b,k);n=o.left,q=e<o.top?-1:e>=o.bottom?1:0}return dm(j,a=bo(b.text,a,1),i,q,h-n)}function dt(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==c7){c7=ad("pre",null,"CodeMirror-line-like");for(var c=0;c<49;++c)c7.appendChild(document.createTextNode("x")),c7.appendChild(ad("br"));c7.appendChild(document.createTextNode("x"))}a7(a.measure,c7);var b=c7.offsetHeight/50;return 3<b&&(a.cachedTextHeight=b),a6(a.measure),b||1}function du(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var c=ad("span","xxxxxxxxxx"),e=ad("pre",[c],"CodeMirror-line-like");a7(a.measure,e);var d=c.getBoundingClientRect(),b=(d.right-d.left)/10;return 2<b&&(a.cachedCharWidth=b),b||10}function dv(c){for(var b=c.display,d={},e={},h=b.gutters.clientLeft,a=b.gutters.firstChild,f=0;a;a=a.nextSibling,++f){var g=c.display.gutterSpecs[f].className;d[g]=a.offsetLeft+a.clientLeft+h,e[g]=a.clientWidth}return{fixedPos:dw(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:d,gutterWidth:e,wrapperWidth:b.wrapper.clientWidth}}function dw(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function dx(a){var c=dt(a.display),b=a.options.lineWrapping,d=b&&Math.max(5,a.display.scroller.clientWidth/du(a.display)-3);return function(e){if(ct(a.doc,e))return 0;var g=0;if(e.widgets)for(var f=0;f<e.widgets.length;f++)e.widgets[f].height&&(g+=e.widgets[f].height);return b?g+(Math.ceil(e.text.length/d)||1)*c:g+c}}function dy(a){var b=a.doc,c=dx(a);b.iter(function(a){var b=c(a);b!=a.height&&bO(a,b)})}function dz(a,d,h,i){var j=a.display;if(!h&&"true"==bB(d).getAttribute("cm-not-content"))return null;var e,f,g=j.lineSpace.getBoundingClientRect();try{e=d.clientX-g.left,f=d.clientY-g.top}catch(l){return null}var c,b=dn(a,e,f);if(i&&1==b.xRel&&(c=bL(a.doc,b.line).text).length==b.ch){var k=ag(c,c.length,a.options.tabSize)-c.length;b=aI(b.line,Math.max(0,Math.round((e-c$(a.display).left)/du(a.display))-k))}return b}function dA(b,c){if(c>=b.display.viewTo||(c-=b.display.viewFrom)<0)return null;for(var d=b.display.view,a=0;a<d.length;a++)if((c-=d[a].size)<0)return a}function dB(b,c,d,e){null==c&&(c=b.doc.first),null==d&&(d=b.doc.first+b.doc.size),e=e||0;var a=b.display;if(e&&d<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>c)&&(a.updateLineNumbers=c),b.curOp.viewChanged=!0,c>=a.viewTo)ca&&cr(b.doc,c)<a.viewTo&&dD(b);else if(d<=a.viewFrom)ca&&cs(b.doc,d+e)>a.viewFrom?dD(b):(a.viewFrom+=e,a.viewTo+=e);else if(c<=a.viewFrom&&d>=a.viewTo)dD(b);else if(c<=a.viewFrom){var g=dE(b,d,d+e,1);g?(a.view=a.view.slice(g.index),a.viewFrom=g.lineN,a.viewTo+=e):dD(b)}else if(d>=a.viewTo){var h=dE(b,c,c,-1);h?(a.view=a.view.slice(0,h.index),a.viewTo=h.lineN):dD(b)}else{var i=dE(b,c,c,-1),j=dE(b,d,d+e,1);i&&j?(a.view=a.view.slice(0,i.index).concat(cH(b,i.lineN,j.lineN)).concat(a.view.slice(j.index)),a.viewTo+=e):dD(b)}var f=a.externalMeasured;f&&(d<f.lineN?f.lineN+=e:c<f.lineN+f.size&&(a.externalMeasured=null))}function dC(b,a,f){b.curOp.viewChanged=!0;var c=b.display,d=b.display.externalMeasured;if(d&&a>=d.lineN&&a<d.lineN+d.size&&(c.externalMeasured=null),!(a<c.viewFrom||a>=c.viewTo)){var e=c.view[dA(b,a)];if(null!=e.node){var g=e.changes||(e.changes=[]);-1==ah(g,f)&&g.push(f)}}}function dD(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function dE(c,d,b,e){var g,a=dA(c,d),f=c.display.view;if(!ca||b==c.doc.first+c.doc.size)return{index:a,lineN:b};for(var h=c.display.viewFrom,i=0;i<a;i++)h+=f[i].size;if(h!=d){if(0<e){if(a==f.length-1)return null;g=h+f[a].size-d,a++}else g=h-d;d+=g,b+=g}for(;cr(c.doc,b)!=b;){if(a==(e<0?0:f.length-1))return null;b+=e*f[a-(e<0?1:0)].size,a+=e}return{index:a,lineN:b}}function dF(e){for(var c=e.display.view,d=0,a=0;a<c.length;a++){var b=c[a];b.hidden||b.node&&!b.changes|| ++d}return d}function G(a){a.display.input.showSelection(a.display.input.prepareSelection())}function dG(a,d){void 0===d&&(d=!0);for(var e=a.doc,f={},h=f.cursors=document.createDocumentFragment(),i=f.selection=document.createDocumentFragment(),c=0;c<e.sel.ranges.length;c++)if(d||c!=e.sel.primIndex){var b=e.sel.ranges[c];if(!(b.from().line>=a.display.viewTo||b.to().line<a.display.viewFrom)){var g=b.empty();(g||a.options.showCursorWhenSelecting)&&dH(a,b.head,h),g||dJ(a,b,i)}}return f}function dH(c,f,e){var a=dk(c,f,"div",null,null,!c.options.singleCursorHeightPerLine),d=e.appendChild(ad("div","\xa0","CodeMirror-cursor"));if(d.style.left=a.left+"px",d.style.top=a.top+"px",d.style.height=Math.max(0,a.bottom-a.top)*c.options.cursorHeight+"px",a.other){var b=e.appendChild(ad("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));b.style.display="",b.style.left=a.other.left+"px",b.style.top=a.other.top+"px",b.style.height=.85*(a.other.bottom-a.other.top)+"px"}}function dI(a,b){return a.top-b.top||a.left-b.left}function dJ(e,j,o){var k=e.display,g=e.doc,p=document.createDocumentFragment(),l=c$(e.display),m=l.left,r=Math.max(k.sizerWidth,c0(e)-k.sizer.offsetLeft)-l.right,s="ltr"==g.direction;function f(c,a,d,b){a<0&&(a=0),a=Math.round(a),b=Math.round(b),p.appendChild(ad("div",null,"CodeMirror-selected","position: absolute; left: "+c+"px;\n                             top: "+a+"px; width: "+(null==d?r-c:d)+"px;\n                             height: "+(b-a)+"px"))}function h(c,d,a){var h,i,b=bL(g,c),j=b.text.length;function l(a,d){return dj(e,aI(c,a),"div",b,d)}function n(f,g,c){var a=dq(e,b,null,f),d="ltr"==g==("after"==c)?"left":"right";return l("after"==c?a.begin:a.end-(/\s/.test(b.text.charAt(a.end-1))?2:1),d)[d]}var k=bu(b,g.direction);return function(e,a,c,f){if(!e)return f(a,c,"ltr",0);for(var g=!1,d=0;d<e.length;++d){var b=e[d];(b.from<c&&b.to>a||a==c&&b.to==a)&&(f(Math.max(b.from,a),Math.min(b.to,c),1==b.level?"rtl":"ltr",d),g=!0)}g||f(a,c,"ltr")}(k,d||0,null==a?j:a,function(o,p,e,z){var q,w,t,A,g="ltr"==e,b=l(o,g?"left":"right"),c=l(p-1,g?"right":"left"),u=null==d&&0==o,v=null==a&&p==j,x=0==z,y=!k||z==k.length-1;if(c.top-b.top<=3){var C=(s?v:u)&&y,B=(s?u:v)&&x?m:(g?b:c).left,D=C?r:(g?c:b).right;f(B,b.top,D-B,b.bottom)}else A=g?(q=s&&u&&x?m:b.left,w=s?r:n(o,e,"before"),t=s?m:n(p,e,"after"),s&&v&&y?r:c.right):(q=s?n(o,e,"before"):m,w=!s&&u&&x?r:b.right,t=!s&&v&&y?m:c.left,s?n(p,e,"after"):r),f(q,b.top,w-q,b.bottom),b.bottom<c.top&&f(m,b.bottom,null,c.top),f(t,c.top,A-t,c.bottom);(!h||0>dI(b,h))&&(h=b),0>dI(c,h)&&(h=c),(!i||0>dI(b,i))&&(i=b),0>dI(c,i)&&(i=c)}),{start:h,end:i}}var c=j.from(),d=j.to();if(c.line==d.line)h(c.line,c.ch,d.ch);else{var n=bL(g,c.line),q=bL(g,d.line),i=cq(n)==cq(q),a=h(c.line,c.ch,i?n.text.length+1:null).end,b=h(d.line,i?0:null,d.ch).start;i&&(a.top<b.top-2?(f(a.right,a.top,null,a.bottom),f(m,b.top,b.left,b.bottom)):f(a.right,a.top,b.left-a.right,a.bottom)),a.bottom<b.top&&f(m,a.bottom,null,b.top)}o.appendChild(p)}function dK(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function dL(a){a.state.focused||(a.display.input.focus(),dN(a))}function dM(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,dO(a))},100)}function dN(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(av(a,"focus",a,b),a.state.focused=!0,af(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),N&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),dK(a))}function dO(a,b){a.state.delayingBlurEvent||(a.state.focused&&(av(a,"blur",a,b),a.state.focused=!1,ac(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function dP(b){for(var d=b.display,i=d.lineDiv.offsetTop,e=0;e<d.view.length;e++){var a=d.view[e],m=b.options.lineWrapping,c=void 0,f=0;if(!a.hidden){if(w&&U<8){var j=a.node.offsetTop+a.node.offsetHeight;c=j-i,i=j}else{var g=a.node.getBoundingClientRect();c=g.bottom-g.top,!m&&a.text.firstChild&&(f=a.text.firstChild.getBoundingClientRect().right-g.left-1)}var k=a.line.height-c;if((.005<k||k< -0.005)&&(bO(a.line,c),dQ(a.line),a.rest))for(var h=0;h<a.rest.length;h++)dQ(a.rest[h]);if(f>b.display.sizerWidth){var l=Math.ceil(f/du(b.display));l>b.display.maxLineLength&&(b.display.maxLineLength=l,b.display.maxLine=a.line,b.display.maxLineChanged=!0)}}}}function dQ(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function dR(c,b,a){var e=a&&null!=a.top?Math.max(0,a.top):c.scroller.scrollTop;e=Math.floor(e-cY(c));var i=a&&null!=a.bottom?a.bottom:e+c.wrapper.clientHeight,d=bQ(b,e),f=bQ(b,i);if(a&&a.ensure){var h=a.ensure.from.line,g=a.ensure.to.line;h<d?f=bQ(b,cv(bL(b,d=h))+c.wrapper.clientHeight):Math.min(g,b.lastLine())>=f&&(d=bQ(b,cv(bL(b,g))-c.wrapper.clientHeight),f=g)}return{from:d,to:Math.max(f,d+1)}}function dS(b,a){var d=b.display,i=dt(b.display);a.top<0&&(a.top=0);var g=b.curOp&&null!=b.curOp.scrollTop?b.curOp.scrollTop:d.scroller.scrollTop,e=c1(b),c={};a.bottom-a.top>e&&(a.bottom=a.top+e);var j=b.doc.height+cZ(d),m=a.top<i,n=a.bottom>j-i;if(a.top<g)c.scrollTop=m?0:a.top;else if(a.bottom>g+e){var k=Math.min(a.top,(n?j:a.bottom)-e);k!=g&&(c.scrollTop=k)}var l=b.curOp&&null!=b.curOp.scrollLeft?b.curOp.scrollLeft:d.scroller.scrollLeft,f=c0(b)-(b.options.fixedGutter?d.gutters.offsetWidth:0),h=a.right-a.left>f;return h&&(a.right=a.left+f),a.left<10?c.scrollLeft=0:a.left<l?c.scrollLeft=Math.max(0,a.left-(h?0:10)):a.right>f+l-3&&(c.scrollLeft=a.right+(h?0:10)-f),c}function dT(a,b){null!=b&&(dW(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function dU(a){dW(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function dV(a,b,c){null==b&&null==c||dW(a),null!=b&&(a.curOp.scrollLeft=b),null!=c&&(a.curOp.scrollTop=c)}function dW(a){var b=a.curOp.scrollToPos;b&&(a.curOp.scrollToPos=null,dX(a,dl(a,b.from),dl(a,b.to),b.margin))}function dX(c,a,b,d){var e=dS(c,{left:Math.min(a.left,b.left),top:Math.min(a.top,b.top)-d,right:Math.max(a.right,b.right),bottom:Math.max(a.bottom,b.bottom)+d});dV(c,e.scrollLeft,e.scrollTop)}function dY(a,b){2>Math.abs(a.doc.scrollTop-b)||(K||eg(a,{top:b}),dZ(a,b,!0),K&&eg(a),ec(a,100))}function dZ(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b),(a.display.scroller.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop==b||(a.display.scroller.scrollTop=b))}function d$(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,ej(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function d_(b){var a=b.display,c=a.gutters.offsetWidth,d=Math.round(b.doc.height+cZ(b.display));return{clientHeight:a.scroller.clientHeight,viewHeight:a.wrapper.clientHeight,scrollWidth:a.scroller.scrollWidth,clientWidth:a.scroller.clientWidth,viewWidth:a.wrapper.clientWidth,barLeft:b.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+c_(b)+a.barHeight,nativeBarWidth:a.nativeBarWidth,gutterWidth:c}}function l(c,e,d){this.cm=d;var a=this.vert=ad("div",[ad("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),b=this.horiz=ad("div",[ad("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=b.tabIndex=-1,c(a),c(b),at(a,"scroll",function(){a.clientHeight&&e(a.scrollTop,"vertical")}),at(b,"scroll",function(){b.clientWidth&&e(b.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&U<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function s(){}function d0(a,b){b=b||d_(a);var c=a.display.barWidth,d=a.display.barHeight;d1(a,b);for(var e=0;e<4&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&dP(a),d1(a,d_(a)),c=a.display.barWidth,d=a.display.barHeight}function d1(c,d){var a=c.display,b=a.scrollbars.update(d);a.sizer.style.paddingRight=(a.barWidth=b.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=b.bottom)+"px",a.heightForcer.style.borderBottom=b.bottom+"px solid transparent",b.right&&b.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=b.bottom+"px",a.scrollbarFiller.style.width=b.right+"px"):a.scrollbarFiller.style.display="",b.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=b.bottom+"px",a.gutterFiller.style.width=d.gutterWidth+"px"):a.gutterFiller.style.display=""}l.prototype.update=function(a){var c=a.scrollWidth>a.clientWidth+1,d=a.scrollHeight>a.clientHeight+1,b=a.nativeBarWidth;if(d){this.vert.style.display="block",this.vert.style.bottom=c?b+"px":"0";var e=a.viewHeight-(c?b:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(c){this.horiz.style.display="block",this.horiz.style.right=d?b+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(d?b:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<a.clientHeight&&(0==b&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:d?b:0,bottom:c?b:0}},l.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},l.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},l.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=O&&!a0?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Q,this.disableVert=new Q},l.prototype.enableZeroWidthBar=function(a,b,c){a.style.pointerEvents="auto",b.set(1e3,function e(){var d=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(d.right-1,(d.top+d.bottom)/2):document.elementFromPoint((d.right+d.left)/2,d.bottom-1))!=a?a.style.pointerEvents="none":b.set(1e3,e)})},l.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)},s.prototype.update=function(){return{bottom:0,right:0}},s.prototype.setScrollLeft=function(){},s.prototype.setScrollTop=function(){},s.prototype.clear=function(){};var aK={native:l,null:s};function d2(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&ac(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new aK[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),at(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?d$(a,b):dY(a,b)},a),a.display.scrollbars.addClass&&af(a.display.wrapper,a.display.scrollbars.addClass)}var d3=0;function d4(a){var b;a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++d3},b=a.curOp,cI?cI.ops.push(b):b.ownsGroup=cI={ops:[b],delayedCallbacks:[]}}function d5(b){var a=b.curOp;a&&function(b,c){var a=b.ownsGroup;if(a)try{!function(c){var d=c.delayedCallbacks,b=0;do{for(;b<d.length;b++)d[b].call(null);for(var e=0;e<c.ops.length;e++){var a=c.ops[e];if(a.cursorActivityHandlers)for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;)a.cursorActivityHandlers[a.cursorActivityCalled++].call(null,a.cm)}}while(b<d.length)}(a)}finally{cI=null,c(a)}}(a,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;!function(h){for(var b,a=h.ops,c=0;c<a.length;c++)d6(a[c]);for(var d=0;d<a.length;d++)(b=a[d]).updatedDisplay=b.mustUpdate&&ee(b.cm,b.update);for(var e=0;e<a.length;e++)d7(a[e]);for(var f=0;f<a.length;f++)d8(a[f]);for(var g=0;g<a.length;g++)d9(a[g])}(a)})}function d6(a){var d,b,c=a.cm,e=c.display;!(b=(d=c).display).scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=c_(d)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=c_(d)+"px",b.scrollbarsClipped=!0),a.updateMaxLine&&cx(c),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<e.viewFrom||a.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&c.options.lineWrapping,a.update=a.mustUpdate&&new R(c,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function d7(a){var b=a.cm,c=b.display;a.updatedDisplay&&dP(b),a.barMeasure=d_(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=c3(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+c_(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-c0(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function d8(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&d$(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1);var c=a.focus&&a.focus==a9();a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,c),(a.updatedDisplay||a.startHeight!=b.doc.height)&&d0(b,a.barMeasure),a.updatedDisplay&&ei(b,a.barMeasure),a.selectionChanged&&dK(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),c&&dL(a.cm)}function d9(a){var b=a.cm,c=b.display,h=b.doc;a.updatedDisplay&&ef(b,a.update),null!=c.wheelStartX&&(null!=a.scrollTop||null!=a.scrollLeft||a.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&dZ(b,a.scrollTop,a.forceScroll),null!=a.scrollLeft&&d$(b,a.scrollLeft,!0,!0),a.scrollToPos&&function(b,a){if(!bx(b,"scrollCursorIntoView")){var d=b.display,f=d.sizer.getBoundingClientRect(),c=null;if(a.top+f.top<0?c=!0:a.bottom+f.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),null!=c&&!a1){var e=ad("div","\u200B",null,"position: absolute;\n                         top: "+(a.top-d.viewOffset-cY(b.display))+"px;\n                         height: "+(a.bottom-a.top+c_(b)+d.barHeight)+"px;\n                         left: "+a.left+"px; width: "+Math.max(2,a.right-a.left)+"px;");b.display.lineSpace.appendChild(e),e.scrollIntoView(c),b.display.lineSpace.removeChild(e)}}}(b,function(b,a,c,e){var i;null==e&&(e=0),b.options.lineWrapping||a!=c||(c="before"==(a=a.ch?aI(a.line,"before"==a.sticky?a.ch-1:a.ch,"after"):a).sticky?aI(a.line,a.ch+1,"before"):a);for(var j=0;j<5;j++){var h=!1,d=dk(b,a),f=c&&c!=a?dk(b,c):d,g=dS(b,i={left:Math.min(d.left,f.left),top:Math.min(d.top,f.top)-e,right:Math.max(d.left,f.left),bottom:Math.max(d.bottom,f.bottom)+e}),k=b.doc.scrollTop,l=b.doc.scrollLeft;if(null!=g.scrollTop&&(dY(b,g.scrollTop),1<Math.abs(b.doc.scrollTop-k)&&(h=!0)),null!=g.scrollLeft&&(d$(b,g.scrollLeft),1<Math.abs(b.doc.scrollLeft-l)&&(h=!0)),!h)break}return i}(b,bY(h,a.scrollToPos.from),bY(h,a.scrollToPos.to),a.scrollToPos.margin));var d=a.maybeHiddenMarkers,e=a.maybeUnhiddenMarkers;if(d)for(var f=0;f<d.length;++f)d[f].lines.length||av(d[f],"hide");if(e)for(var g=0;g<e.length;++g)e[g].lines.length&&av(e[g],"unhide");c.wrapper.offsetHeight&&(h.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&av(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function ea(a,b){if(a.curOp)return b();d4(a);try{return b()}finally{d5(a)}}function eb(a,b){return function(){if(a.curOp)return b.apply(a,arguments);d4(a);try{return b.apply(a,arguments)}finally{d5(a)}}}function i(a){return function(){if(this.curOp)return a.apply(this,arguments);d4(this);try{return a.apply(this,arguments)}finally{d5(this)}}}function e(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);d4(b);try{return a.apply(this,arguments)}finally{d5(b)}}}function ec(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,bb(ed,a))}function ed(b){var a=b.doc;if(!(a.highlightFrontier>=b.display.viewTo)){var e=+new Date+b.options.workTime,c=b1(b,a.highlightFrontier),d=[];a.iter(c.line,Math.min(a.first+a.size,b.display.viewTo+500),function(f){if(c.line>=b.display.viewFrom){var i=f.styles,l=f.text.length>b.options.maxHighlightLength?aF(a.mode,c.state):null,m=b_(b,f,c,!0);l&&(c.state=l),f.styles=m.styles;var h=f.styleClasses,g=m.classes;g?f.styleClasses=g:h&&(f.styleClasses=null);for(var k=!i||i.length!=f.styles.length||h!=g&&(!h||!g||h.bgClass!=g.bgClass||h.textClass!=g.textClass),j=0;!k&&j<i.length;++j)k=i[j]!=f.styles[j];k&&d.push(c.line),f.stateAfter=c.save(),c.nextLine()}else f.text.length<=b.options.maxHighlightLength&&b2(b,f.text,c),f.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>e)return ec(b,b.options.workDelay),!0}),a.highlightFrontier=c.line,a.modeFrontier=Math.max(a.modeFrontier,c.line),d.length&&ea(b,function(){for(var a=0;a<d.length;a++)dC(b,d[a],"text")})}}var R=function(a,c,d){var b=a.display;this.viewport=c,this.visible=dR(b,a.doc,c),this.editorIsHidden=!b.wrapper.offsetWidth,this.wrapperHeight=b.wrapper.clientHeight,this.wrapperWidth=b.wrapper.clientWidth,this.oldDisplayWidth=c0(a),this.force=d,this.dims=dv(a),this.events=[]};function ee(c,d){var a=c.display,j=c.doc;if(d.editorIsHidden)return dD(c),!1;if(!d.force&&d.visible.from>=a.viewFrom&&d.visible.to<=a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&0==dF(c))return!1;ek(c)&&(dD(c),d.dims=dv(c));var l=j.first+j.size,g=Math.max(d.visible.from-c.options.viewportMargin,j.first),h=Math.min(l,d.visible.to+c.options.viewportMargin);a.viewFrom<g&&g-a.viewFrom<20&&(g=Math.max(j.first,a.viewFrom)),a.viewTo>h&&a.viewTo-h<20&&(h=Math.min(l,a.viewTo)),ca&&(g=cr(c.doc,g),h=cs(c.doc,h));var i,e,f,b,m=g!=a.viewFrom||h!=a.viewTo||a.lastWrapHeight!=d.wrapperHeight||a.lastWrapWidth!=d.wrapperWidth;i=c,e=g,f=h,0==(b=i.display).view.length||e>=b.viewTo||f<=b.viewFrom?(b.view=cH(i,e,f),b.viewFrom=e):(b.viewFrom>e?b.view=cH(i,e,b.viewFrom).concat(b.view):b.viewFrom<e&&(b.view=b.view.slice(dA(i,e))),b.viewFrom=e,b.viewTo<f?b.view=b.view.concat(cH(i,b.viewTo,f)):b.viewTo>f&&(b.view=b.view.slice(0,dA(i,f)))),b.viewTo=f,a.viewOffset=cv(bL(c.doc,a.viewFrom)),c.display.mover.style.top=a.viewOffset+"px";var k=dF(c);if(!m&&0==k&&!d.force&&a.renderedView==a.view&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo))return!1;var n=function(c){if(c.hasFocus())return null;var d=a9();if(!d||!ae(c.display.lineDiv,d))return null;var b={activeElt:d};if(window.getSelection){var a=window.getSelection();a.anchorNode&&a.extend&&ae(c.display.lineDiv,a.anchorNode)&&(b.anchorNode=a.anchorNode,b.anchorOffset=a.anchorOffset,b.focusNode=a.focusNode,b.focusOffset=a.focusOffset)}return b}(c);return 4<k&&(a.lineDiv.style.display="none"),function(e,l,m){var g,b,n,h,d,i=e.display,r=e.options.lineNumbers,j=i.lineDiv,c=j.firstChild;function o(a){var b=a.nextSibling;return N&&O&&e.display.currentWheelTarget==a?a.style.display="none":a.parentNode.removeChild(a),b}for(var p=i.view,f=i.viewFrom,k=0;k<p.length;k++){var a=p[k];if(a.hidden);else if(a.node&&a.node.parentNode==j){for(;c!=a.node;)c=o(c);var q=r&&null!=l&&l<=f&&a.lineNumber;a.changes&&(-1<ah(a.changes,"gutter")&&(q=!1),cM(e,a,f,m)),q&&(a6(a.lineNumber),a.lineNumber.appendChild(document.createTextNode(bS(e.options,f)))),c=a.node.nextSibling}else{var s=(n=f,h=m,d=cO(g=e,b=a),b.text=b.node=d.pre,d.bgClass&&(b.bgClass=d.bgClass),d.textClass&&(b.textClass=d.textClass),cQ(g,b),cR(g,b,n,h),cT(g,b,h),b.node);j.insertBefore(s,c)}f+=a.size}for(;c;)c=o(c)}(c,a.updateLineNumbers,d.dims),4<k&&(a.lineDiv.style.display=""),a.renderedView=a.view,function(a){if(a&&a.activeElt&&a.activeElt!=a9()&&(a.activeElt.focus(),a.anchorNode&&ae(document.body,a.anchorNode)&&ae(document.body,a.focusNode))){var b=window.getSelection(),c=document.createRange();c.setEnd(a.anchorNode,a.anchorOffset),c.collapse(!1),b.removeAllRanges(),b.addRange(c),b.extend(a.focusNode,a.focusOffset)}}(n),a6(a.cursorDiv),a6(a.selectionDiv),a.gutters.style.height=a.sizer.style.minHeight=0,m&&(a.lastWrapHeight=d.wrapperHeight,a.lastWrapWidth=d.wrapperWidth,ec(c,400)),a.updateLineNumbers=null,!0}function ef(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=c0(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+cZ(a.display)-c1(a),c.top)}),b.visible=dR(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&ee(a,b);d=!1){dP(a);var e=d_(a);G(a),d0(a,e),ei(a,e),b.force=!1}b.signal(a,"update",a),a.display.viewFrom==a.display.reportedViewFrom&&a.display.viewTo==a.display.reportedViewTo||(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function eg(a,d){var b=new R(a,d);if(ee(a,b)){dP(a),ef(a,b);var c=d_(a);G(a),d0(a,c),ei(a,c),b.finish()}}function eh(a){var b=a.gutters.offsetWidth;a.sizer.style.marginLeft=b+"px"}function ei(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+c_(a)+"px"}function ej(d){var b=d.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&d.options.fixedGutter){for(var h=dw(b)-b.scroller.scrollLeft+d.doc.scrollLeft,i=b.gutters.offsetWidth,e=h+"px",a=0;a<c.length;a++)if(!c[a].hidden){d.options.fixedGutter&&(c[a].gutter&&(c[a].gutter.style.left=e),c[a].gutterBackground&&(c[a].gutterBackground.style.left=e));var f=c[a].alignable;if(f)for(var g=0;g<f.length;g++)f[g].style.left=e}d.options.fixedGutter&&(b.gutters.style.left=h+i+"px")}}function ek(b){if(!b.options.lineNumbers)return!1;var d=b.doc,c=bS(b.options,d.first+d.size-1),a=b.display;if(c.length==a.lineNumChars)return!1;var e=a.measure.appendChild(ad("div",[ad("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(f,a.lineGutter.offsetWidth-g)+1,a.lineNumWidth=a.lineNumInnerWidth+g,a.lineNumChars=a.lineNumInnerWidth?c.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",eh(b.display),!0}function el(d,e){for(var b=[],f=!1,c=0;c<d.length;c++){var a=d[c],g=null;if("string"!=typeof a&&(g=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!e)continue;f=!0}b.push({className:a,style:g})}return e&&!f&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function em(a){var b=a.gutters,c=a.gutterSpecs;a6(b),a.lineGutter=null;for(var d=0;d<c.length;++d){var e=c[d],f=e.className,g=e.style,h=b.appendChild(ad("div",null,"CodeMirror-gutter "+f));g&&(h.style.cssText=g),"CodeMirror-linenumbers"==f&&((a.lineGutter=h).style.width=(a.lineNumWidth||1)+"px")}b.style.display=c.length?"":"none",eh(a)}function S(a){em(a.display),dB(a),ej(a)}function en(b,c,d,e){var a=this;this.input=d,a.scrollbarFiller=ad("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=ad("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=a8("div",null,"CodeMirror-code"),a.selectionDiv=ad("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=ad("div",null,"CodeMirror-cursors"),a.measure=ad("div",null,"CodeMirror-measure"),a.lineMeasure=ad("div",null,"CodeMirror-measure"),a.lineSpace=a8("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var f=a8("div",[a.lineSpace],"CodeMirror-lines");a.mover=ad("div",[f],null,"position: relative"),a.sizer=ad("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=ad("div",null,null,"position: absolute; height: 30px; width: 1px;"),a.gutters=ad("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=ad("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=ad("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),w&&U<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),N||K&&Z||(a.scroller.draggable=!0),b&&(b.appendChild?b.appendChild(a.wrapper):b(a.wrapper)),a.viewFrom=a.viewTo=c.first,a.reportedViewFrom=a.reportedViewTo=c.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=el(e.gutters,e.lineNumbers),em(a),d.init(a)}R.prototype.signal=function(a,b){bz(a,b)&&this.events.push(arguments)},R.prototype.finish=function(){for(var a=0;a<this.events.length;a++)av.apply(null,this.events[a])};var eo=0,x=null;function ep(a){var c=a.wheelDeltaX,b=a.wheelDeltaY;return null==c&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(c=a.detail),null==b&&a.detail&&a.axis==a.VERTICAL_AXIS?b=a.detail:null==b&&(b=a.wheelDelta),{x:c,y:b}}function eq(d,h){var m=ep(h),e=m.x,b=m.y,a=d.display,c=a.scroller,o=c.scrollWidth>c.clientWidth,i=c.scrollHeight>c.clientHeight;if(e&&o||b&&i){if(b&&O&&N){e:for(var f=h.target,n=a.view;f!=c;f=f.parentNode)for(var j=0;j<n.length;j++)if(n[j].node==f){d.display.currentWheelTarget=f;break e}}if(e&&!K&&!C&&null!=x)return b&&i&&dY(d,Math.max(0,c.scrollTop+b*x)),d$(d,Math.max(0,c.scrollLeft+e*x)),(!b||b&&i)&&aw(h),void(a.wheelStartX=null);if(b&&null!=x){var k=b*x,g=d.doc.scrollTop,l=g+a.wrapper.clientHeight;k<0?g=Math.max(0,g+k-50):l=Math.min(d.doc.height,l+k+50),eg(d,{top:g,bottom:l})}eo<20&&(null==a.wheelStartX?(a.wheelStartX=c.scrollLeft,a.wheelStartY=c.scrollTop,a.wheelDX=e,a.wheelDY=b,setTimeout(function(){if(null!=a.wheelStartX){var b=c.scrollLeft-a.wheelStartX,d=c.scrollTop-a.wheelStartY,e=d&&a.wheelDY&&d/a.wheelDY||b&&a.wheelDX&&b/a.wheelDX;a.wheelStartX=a.wheelStartY=null,e&&(x=(x*eo+e)/(eo+1),++eo)}},200)):(a.wheelDX+=e,a.wheelDY+=b))}}w?x=-0.53:K?x=15:W?x=-0.7:X&&(x=-1/3);var t=function(a,b){this.ranges=a,this.primIndex=b};t.prototype.primary=function(){return this.ranges[this.primIndex]},t.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(!bT(c.anchor,d.anchor)||!bT(c.head,d.head))return!1}return!0},t.prototype.deepCopy=function(){for(var b=[],a=0;a<this.ranges.length;a++)b[a]=new H(bU(this.ranges[a].anchor),bU(this.ranges[a].head));return new t(b,this.primIndex)},t.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},t.prototype.contains=function(c,b){b=b||c;for(var a=0;a<this.ranges.length;a++){var d=this.ranges[a];if(0<=aJ(b,d.from())&&0>=aJ(c,d.to()))return a}return -1};var H=function(a,b){this.anchor=a,this.head=b};function er(f,a,e){var k=f&&f.options.selectionsMayTouch,l=a[e];a.sort(function(a,b){return aJ(a.from(),b.from())}),e=ah(a,l);for(var b=1;b<a.length;b++){var c=a[b],d=a[b-1],g=aJ(d.to(),c.from());if(k&&!c.empty()?0<g:0<=g){var h=bW(d.from(),c.from()),i=bV(d.to(),c.to()),j=d.empty()?c.from()==c.head:d.from()==d.head;b<=e&& --e,a.splice(--b,2,new H(j?i:h,j?h:i))}}return new t(a,e)}function es(a,b){return new t([new H(a,b||a)],0)}function aL(a){return a.text?aI(a.from.line+a.text.length-1,$(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function et(b,a){if(0>aJ(b,a.from))return b;if(0>=aJ(b,a.to))return aL(a);var d=b.line+a.text.length-(a.to.line-a.from.line)-1,c=b.ch;return b.line==a.to.line&&(c+=aL(a).ch-a.to.ch),aI(d,c)}function eu(a,c){for(var d=[],b=0;b<a.sel.ranges.length;b++){var e=a.sel.ranges[b];d.push(new H(et(e.anchor,c),et(e.head,c)))}return er(a.cm,d,a.sel.primIndex)}function ev(a,b,c){return a.line==b.line?aI(c.line,a.ch-b.ch+c.ch):aI(c.line+(a.line-b.line),a.ch)}function aM(a){a.doc.mode=aD(a.options,a.doc.modeOption),I(a)}function I(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,ec(a,100),a.state.modeGen++,a.curOp&&dB(a)}function ew(b,a){return 0==a.from.ch&&0==a.to.ch&&""==$(a.text)&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}function ex(a,e,r,p){function j(a){return r?r[a]:null}function f(b,h,i){var a,d,f,c,g;a=b,d=h,f=i,c=p,a.text=d,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),cg(a),ch(a,f),(g=c?c(a):1)!=a.height&&bO(a,g),cK(b,"change",b,e)}function k(d,e){for(var c=[],a=d;a<e;++a)c.push(new F(b[a],j(a),p));return c}var c=e.from,g=e.to,b=e.text,d=bL(a,c.line),h=bL(a,g.line),m=$(b),l=j(b.length-1),i=g.line-c.line;if(e.full)a.insert(0,k(0,b.length)),a.remove(b.length,a.size-b.length);else if(ew(a,e)){var n=k(0,b.length-1);f(h,h.text,l),i&&a.remove(c.line,i),n.length&&a.insert(c.line,n)}else if(d==h){if(1==b.length)f(d,d.text.slice(0,c.ch)+m+d.text.slice(g.ch),l);else{var o=k(1,b.length-1);o.push(new F(m+d.text.slice(g.ch),l,p)),f(d,d.text.slice(0,c.ch)+b[0],j(0)),a.insert(c.line+1,o)}}else if(1==b.length)f(d,d.text.slice(0,c.ch)+b[0]+h.text.slice(g.ch),j(0)),a.remove(c.line+1,i);else{f(d,d.text.slice(0,c.ch)+b[0],j(0)),f(h,m+h.text.slice(g.ch),l);var q=k(1,b.length-1);1<i&&a.remove(c.line+1,i-1),a.insert(c.line+1,q)}cK(a,"change",a,e)}function ey(a,b,c){!function g(a,i,h){if(a.linked)for(var e=0;e<a.linked.length;++e){var d=a.linked[e];if(null!=d.doc){var f=h&&d.sharedHist;c&&!f||(b(d.doc,f),g(d.doc,a,f))}}}(a,null,!0)}function ez(a,b){if(b.cm)throw new Error("This document is already in use.");dy((a.doc=b).cm=a),aM(a),eA(a),a.options.lineWrapping||cx(a),a.options.mode=b.modeOption,dB(a)}function eA(a){("rtl"==a.doc.direction?af:ac)(a.display.lineDiv,"CodeMirror-rtl")}function eB(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function eC(b,a){var c={from:bU(a.from),to:aL(a),text:bM(b,a.from,a.to)};return eG(b,c,a.from.line,a.to.line+1),ey(b,function(b){return eG(b,c,a.from.line,a.to.line+1)},!0),c}function eD(a){for(;a.length&&$(a).ranges;)a.pop()}function eE(d,b,k,g){var a=d.history;a.undone.length=0;var e,f,c,h,i=+new Date;if((a.lastOp==g||a.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.lastModTime>i-(d.cm?d.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))&&(e=(c=a,h=a.lastOp==g,h?(eD(c.done),$(c.done)):c.done.length&&!$(c.done).ranges?$(c.done):1<c.done.length&&!c.done[c.done.length-2].ranges?(c.done.pop(),$(c.done)):void 0)))f=$(e.changes),0==aJ(b.from,b.to)&&0==aJ(b.from,f.to)?f.to=aL(b):e.changes.push(eC(d,b));else{var j=$(a.done);for(j&&j.ranges||eF(d.sel,a.done),e={changes:[eC(d,b)],generation:a.generation},a.done.push(e);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(k),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=i,a.lastOp=a.lastSelOp=g,a.lastOrigin=a.lastSelOrigin=b.origin,f||av(d,"historyAdded")}function eF(b,c){var a=$(c);a&&a.ranges&&a.equals(b)||c.push(b)}function eG(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e=e||(b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function eH(b){if(!b)return null;for(var a,c=0;c<b.length;++c)b[c].marker.explicitlyCleared?a=a||b.slice(0,c):a&&a.push(b[c]);return a?a.length?a:null:b}function eI(h,i){var a=function(e,b){var c=b["spans_"+e.id];if(!c)return null;for(var d=[],a=0;a<b.text.length;++a)d.push(eH(c[a]));return d}(h,i),e=ce(h,i);if(!a)return e;if(!e)return a;for(var b=0;b<a.length;++b){var d=a[b],c=e[b];if(d&&c)e:for(var f=0;f<c.length;++f){for(var j=c[f],g=0;g<d.length;++g)if(d[g].marker==j.marker)continue e;d.push(j)}else c&&(a[b]=c)}return a}function eJ(h,i,l){for(var d=[],e=0;e<h.length;++e){var b=h[e];if(b.ranges)d.push(l?t.prototype.deepCopy.call(b):b);else{var j=b.changes,f=[];d.push({changes:f});for(var g=0;g<j.length;++g){var a=j[g],k=void 0;if(f.push({from:a.from,to:a.to,text:a.text}),i)for(var c in a)(k=c.match(/^spans_(\d+)$/))&& -1<ah(i,Number(k[1]))&&($(f)[c]=a[c],delete a[c])}}}return d}function eK(e,a,b,f){if(f){var c=e.anchor;if(b){var d=0>aJ(a,c);d!=0>aJ(b,c)?(c=a,a=b):d!=0>aJ(a,b)&&(a=b)}return new H(c,a)}return new H(b||a,a)}function eL(a,c,d,e,b){null==b&&(b=a.cm&&(a.cm.display.shift||a.extend)),eQ(a,new t([eK(a.sel.primary(),c,d,b)],0),e)}function eM(a,d,e){for(var c=[],f=a.cm&&(a.cm.display.shift||a.extend),b=0;b<a.sel.ranges.length;b++)c[b]=eK(a.sel.ranges[b],d[b],null,f);eQ(a,er(a.cm,c,a.sel.primIndex),e)}function eN(a,c,d,e){var b=a.sel.ranges.slice(0);b[c]=d,eQ(a,er(a.cm,b,a.sel.primIndex),e)}function eO(a,b,c,d){eQ(a,es(b,c),d)}function eP(a,c,d){var b=a.history.done,e=$(b);e&&e.ranges?eR(a,b[b.length-1]=c,d):eQ(a,c,d)}function eQ(c,n,k){var g,e,h,d,a,b,f,l,i,j,m;eR(c,n,k),g=c,e=c.sel,h=c.cm?c.cm.curOp.id:NaN,d=k,a=g.history,b=d&&d.origin,h==a.lastSelOp||b&&a.lastSelOrigin==b&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==b||(f=g,l=b,i=$(a.done),j=e,"*"==(m=l.charAt(0))||"+"==m&&i.ranges.length==j.ranges.length&&i.somethingSelected()==j.somethingSelected()&&new Date-f.history.lastSelTime<=(f.cm?f.cm.options.historyEventDelay:500)))?a.done[a.done.length-1]=e:eF(e,a.done),a.lastSelTime=+new Date,a.lastSelOrigin=b,a.lastSelOp=h,d&& !1!==d.clearRedo&&eD(a.undone)}function eR(a,c,b){(bz(a,"beforeSelectionChange")||a.cm&&bz(a.cm,"beforeSelectionChange"))&&(c=(e=a,f=c,g=b,h={ranges:f.ranges,update:function(b){this.ranges=[];for(var a=0;a<b.length;a++)this.ranges[a]=new H(bY(e,b[a].anchor),bY(e,b[a].head))},origin:g&&g.origin},av(e,"beforeSelectionChange",e,h),e.cm&&av(e.cm,"beforeSelectionChange",e.cm,h),h.ranges!=f.ranges?er(e.cm,h.ranges,h.ranges.length-1):f));var e,f,g,h,d=b&&b.bias||(0>aJ(c.primary().head,a.sel.primary().head)?-1:1);eS(a,eU(a,c,d,!0)),b&& !1===b.scroll||!a.cm||dU(a.cm)}function eS(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,by(a.cm)),cK(a,"cursorActivity",a))}function eT(a){eS(a,eU(a,a.sel,null,!1))}function eU(c,a,g,h){for(var d,b=0;b<a.ranges.length;b++){var e=a.ranges[b],f=a.ranges.length==c.sel.ranges.length&&c.sel.ranges[b],i=eW(c,e.anchor,f&&f.anchor,g,h),j=eW(c,e.head,f&&f.head,g,h);(d||i!=e.anchor||j!=e.head)&&((d=d||a.ranges.slice(0,b))[b]=new H(i,j))}return d?er(c.cm,d,a.primIndex):a}function eV(g,a,n,c,j){var f=bL(g,a.line);if(f.markedSpans)for(var i=0;i<f.markedSpans.length;++i){var e=f.markedSpans[i],b=e.marker,k="selectLeft"in b?!b.selectLeft:b.inclusiveLeft,l="selectRight"in b?!b.selectRight:b.inclusiveRight;if((null==e.from||(k?e.from<=a.ch:e.from<a.ch))&&(null==e.to||(l?e.to>=a.ch:e.to>a.ch))){if(j&&(av(b,"beforeCursorEnter"),b.explicitlyCleared)){if(f.markedSpans){--i;continue}break}if(!b.atomic)continue;if(n){var d=b.find(c<0?1:-1),m=void 0;if((c<0?l:k)&&(d=eX(g,d,-c,d&&d.line==a.line?f:null)),d&&d.line==a.line&&(m=aJ(d,n))&&(c<0?m<0:0<m))return eV(g,d,a,c,j)}var h=b.find(c<0?-1:1);return(c<0?k:l)&&(h=eX(g,h,c,h.line==a.line?f:null)),h?eV(g,h,a,c,j):null}}return a}function eW(a,b,c,f,d){var e=f||1;return eV(a,b,c,e,d)|| !d&&eV(a,b,c,e,!0)||eV(a,b,c,-e,d)|| !d&&eV(a,b,c,-e,!0)||(a.cantEdit=!0,aI(a.first,0))}function eX(b,a,c,d){return c<0&&0==a.ch?a.line>b.first?bY(b,aI(a.line-1)):null:0<c&&a.ch==(d||bL(b,a.line)).text.length?a.line<b.first+b.size-1?aI(a.line+1,0):null:new aI(a.line,a.ch+c)}function aN(a){a.setSelection(aI(a.firstLine(),0),aI(a.lastLine()),bd)}function eY(b,c,d){var a={canceled:!1,from:c.from,to:c.to,text:c.text,origin:c.origin,cancel:function(){return a.canceled=!0}};return d&&(a.update=function(c,d,e,f){c&&(a.from=bY(b,c)),d&&(a.to=bY(b,d)),e&&(a.text=e),void 0!==f&&(a.origin=f)}),av(b,"beforeChange",b,a),b.cm&&av(b.cm,"beforeChange",b.cm,a),a.canceled?(b.cm&&(b.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function eZ(a,b,e){if(a.cm){if(!a.cm.curOp)return eb(a.cm,eZ)(a,b,e);if(a.cm.state.suppressEdits)return}if(!(bz(a,"beforeChange")||a.cm&&bz(a.cm,"beforeChange"))||(b=eY(a,b,!0))){var d=b9&&!e&&function(m,i,j){var f=null;if(m.iter(i.line,j.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||f&& -1!=ah(f,c)||(f=f||[]).push(c)}}),!f)return null;for(var c=[{from:i,to:j}],g=0;g<f.length;++g)for(var h=f[g],a=h.find(0),d=0;d<c.length;++d){var b=c[d];if(!(0>aJ(b.to,a.from)||0<aJ(b.from,a.to))){var e=[d,1],k=aJ(b.from,a.from),l=aJ(b.to,a.to);!(k<0)&&(h.inclusiveLeft||k)||e.push({from:b.from,to:a.from}),!(0<l)&&(h.inclusiveRight||l)||e.push({from:a.to,to:b.to}),c.splice.apply(c,e),d+=e.length-3}}return c}(a,b.from,b.to);if(d)for(var c=d.length-1;0<=c;--c)e$(a,{from:d[c].from,to:d[c].to,text:c?[""]:b.text,origin:b.origin});else e$(a,b)}}function e$(b,a){if(1!=a.text.length||""!=a.text[0]||0!=aJ(a.from,a.to)){var c=eu(b,a);eE(b,a,c,b.cm?b.cm.curOp.id:NaN),e1(b,a,c,ce(b,a));var d=[];ey(b,function(b,c){c|| -1!=ah(d,b.history)||(e5(b.history,a),d.push(b.history)),e1(b,a,null,ce(b,a))})}}function e_(b,i,f){var j=b.cm&&b.cm.state.suppressEdits;if(!j||f){for(var a,c=b.history,k=b.sel,d="undo"==i?c.done:c.undone,g="undo"==i?c.undone:c.done,e=0;e<d.length&&(a=d[e],f?!a.ranges||a.equals(b.sel):a.ranges);e++);if(e!=d.length){for(c.lastOrigin=c.lastSelOrigin=null;;){if(!(a=d.pop()).ranges){if(j)return void d.push(a);break}if(eF(a,g),f&&!a.equals(b.sel))return void eQ(b,a,{clearRedo:!1});k=a}var m=[];eF(k,g),g.push({changes:m,generation:c.generation}),c.generation=a.generation|| ++c.maxGeneration;for(var o=bz(b,"beforeChange")||b.cm&&bz(b.cm,"beforeChange"),n=function(e){var c=a.changes[e];if(c.origin=i,o&&!eY(b,c,!1))return d.length=0,{};m.push(eC(b,c));var f=e?eu(b,c):$(d);e1(b,c,f,eI(b,c)),!e&&b.cm&&b.cm.scrollIntoView({from:c.from,to:aL(c)});var g=[];ey(b,function(a,b){b|| -1!=ah(g,a.history)||(e5(a.history,c),g.push(a.history)),e1(a,c,null,eI(a,c))})},h=a.changes.length-1;0<=h;--h){var l=n(h);if(l)return l.v}}}}function e0(a,b){if(0!=b&&(a.first+=b,a.sel=new t(bh(a.sel.ranges,function(a){return new H(aI(a.anchor.line+b,a.anchor.ch),aI(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){dB(a.cm,a.first,a.first-b,b);for(var d=a.cm.display,c=d.viewFrom;c<d.viewTo;c++)dC(a.cm,c,"gutter")}}function e1(b,a,c,d){if(b.cm&&!b.cm.curOp)return eb(b.cm,e1)(b,a,c,d);if(a.to.line<b.first)e0(b,a.text.length-1-(a.to.line-a.from.line));else if(!(a.from.line>b.lastLine())){if(a.from.line<b.first){var f=a.text.length-1-(b.first-a.from.line);e0(b,f),a={from:aI(b.first,0),to:aI(a.to.line+f,a.to.ch),text:[$(a.text)],origin:a.origin}}var e=b.lastLine();a.to.line>e&&(a={from:a.from,to:aI(e,bL(b,e).text.length),text:[a.text[0]],origin:a.origin}),a.removed=bM(b,a.from,a.to),c=c||eu(b,a),b.cm?function(a,b,j){var d=a.doc,m=a.display,c=b.from,e=b.to,k=!1,f=c.line;a.options.lineWrapping||(f=bP(cq(bL(d,c.line))),d.iter(f,e.line+1,function(a){if(a==m.maxLine)return k=!0})),-1<d.sel.contains(b.from,b.to)&&by(a),ex(d,b,j,dx(a)),a.options.lineWrapping||(d.iter(f,c.line+b.text.length,function(a){var b=cw(a);b>m.maxLineLength&&(m.maxLine=a,m.maxLineLength=b,m.maxLineChanged=!0,k=!1)}),k&&(a.curOp.updateMaxLine=!0)),function(a,c){if(a.modeFrontier=Math.min(a.modeFrontier,c),!(a.highlightFrontier<c-10)){for(var d=a.first,b=c-1;d<b;b--){var e=bL(a,b).stateAfter;if(e&&(!(e instanceof b$)||b+e.lookAhead<c)){d=b+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,d)}}(d,c.line),ec(a,400);var l=b.text.length-(e.line-c.line)-1;b.full?dB(a):c.line!=e.line||1!=b.text.length||ew(a.doc,b)?dB(a,c.line,e.line+1,l):dC(a,c.line,"text");var g=bz(a,"changes"),h=bz(a,"change");if(h||g){var i={from:c,to:e,text:b.text,removed:b.removed,origin:b.origin};h&&cK(a,"change",a,i),g&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(i)}a.display.selForContextMenu=null}(b.cm,a,d):ex(b,a,d),eR(b,c,bd),b.cantEdit&&eW(b,aI(b.firstLine(),0))&&(b.cantEdit=!1)}}function e2(d,c,a,b,f){var e;0>aJ(b=b||a,a)&&(a=(e=[b,a])[0],b=e[1]),"string"==typeof c&&(c=d.splitLines(c)),eZ(d,{from:a,to:b,text:c,origin:f})}function e3(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function e4(d,g,h,e){for(var c=0;c<d.length;++c){var a=d[c],j=!0;if(a.ranges){a.copied||((a=d[c]=a.deepCopy()).copied=!0);for(var f=0;f<a.ranges.length;f++)e3(a.ranges[f].anchor,g,h,e),e3(a.ranges[f].head,g,h,e)}else{for(var i=0;i<a.changes.length;++i){var b=a.changes[i];if(h<b.from.line)b.from=aI(b.from.line+e,b.from.ch),b.to=aI(b.to.line+e,b.to.ch);else if(g<=b.to.line){j=!1;break}}j||(d.splice(0,c+1),c=0)}}}function e5(d,a){var b=a.from.line,c=a.to.line,e=a.text.length-(c-b)-1;e4(d.done,b,c,e),e4(d.undone,b,c,e)}function e6(b,a,e,f){var c=a,d=a;return"number"==typeof a?d=bL(b,bX(b,a)):c=bP(a),null==c?null:(f(d,c)&&b.cm&&dC(b.cm,c,e),d)}function aO(a){this.lines=a,this.parent=null;for(var c=0,b=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function T(a){this.children=a;for(var d=0,e=0,b=0;b<a.length;++b){var c=a[b];d+=c.chunkSize(),e+=c.height,c.parent=this}this.size=d,this.height=e,this.parent=null}function y(c,d,a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.doc=c,this.node=d}function e7(a,b,c){cv(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&dT(a,c)}H.prototype.from=function(){return bW(this.anchor,this.head)},H.prototype.to=function(){return bV(this.anchor,this.head)},H.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},aO.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,d){for(var e,b=a,f=a+d;b<f;++b){var c=this.lines[b];this.height-=c.height,(e=c).parent=null,cg(e),cK(c,"delete")}this.lines.splice(a,d)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(c,a,d){this.height+=d,this.lines=this.lines.slice(0,c).concat(a).concat(this.lines.slice(c));for(var b=0;b<a.length;++b)a[b].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},T.prototype={chunkSize:function(){return this.size},removeInner:function(a,c){this.size-=c;for(var d=0;d<this.children.length;++d){var b=this.children[d],e=b.chunkSize();if(a<e){var f=Math.min(c,e-a),h=b.height;if(b.removeInner(a,f),this.height-=h-b.height,e==f&&(this.children.splice(d--,1),b.parent=null),0==(c-=f))break;a=0}else a-=e}if(this.size-c<25&&(1<this.children.length||!(this.children[0]instanceof aO))){var g=[];this.collapse(g),this.children=[new aO(g)],this.children[0].parent=this}},collapse:function(b){for(var a=0;a<this.children.length;++a)this.children[a].collapse(b)},insertInner:function(c,f,g){this.size+=f.length,this.height+=g;for(var b=0;b<this.children.length;++b){var a=this.children[b],h=a.chunkSize();if(c<=h){if(a.insertInner(c,f,g),a.lines&&50<a.lines.length){for(var i=a.lines.length%25+25,d=i;d<a.lines.length;){var e=new aO(a.lines.slice(d,d+=25));a.height-=e.height,this.children.splice(++b,0,e),e.parent=this}a.lines=a.lines.slice(0,i),this.maybeSpill()}break}c-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=new T(a.children.splice(a.children.length-5,5));if(a.parent){a.size-=b.size,a.height-=b.height;var d=ah(a.parent.children,a);a.parent.children.splice(d+1,0,b)}else{var c=new T(a.children);(c.parent=a).children=[c,b],a=c}b.parent=a.parent}while(10<a.children.length)a.parent.maybeSpill()}},iterN:function(a,d,g){for(var b=0;b<this.children.length;++b){var e=this.children[b],c=e.chunkSize();if(a<c){var f=Math.min(d,c-a);if(e.iterN(a,f,g))return!0;if(0==(d-=f))break;a=0}else a-=c}}},y.prototype.clear=function(){var b=this.doc.cm,a=this.line.widgets,c=this.line,e=bP(c);if(null!=e&&a){for(var d=0;d<a.length;++d)a[d]==this&&a.splice(d--,1);a.length||(c.widgets=null);var f=cW(this);bO(c,Math.max(0,c.height-f)),b&&(ea(b,function(){e7(b,c,-f),dC(b,e,"widget")}),cK(b,"lineWidgetCleared",b,this,e))}},y.prototype.changed=function(){var e=this,d=this.height,b=this.doc.cm,a=this.line;this.height=null;var c=cW(this)-d;c&&(ct(this.doc,a)||bO(a,a.height+c),b&&ea(b,function(){b.curOp.forceUpdate=!0,e7(b,a,c),cK(b,"lineWidgetChanged",b,e,bP(a))}))},o(y);var e8=0,m=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++e8};function e9(b,c,d,e,h){if(e&&e.shared){var i,k,l,g,n,o,p,r;return i=b,k=c,l=d,g=e,n=h,(g=bc(g)).shared=!1,p=(o=[e9(i,k,l,g,n)])[0],r=g.widgetNode,ey(i,function(a){r&&(g.widgetNode=r.cloneNode(!0)),o.push(e9(a,bY(a,k),bY(a,l),g,n));for(var b=0;b<a.linked.length;++b)if(a.linked[b].isParent)return;p=$(o)}),new z(o,p)}if(b.cm&&!b.cm.curOp)return eb(b.cm,e9)(b,c,d,e,h);var a=new m(b,h),q=aJ(c,d);if(e&&bc(e,a,!1),0<q||0==q&& !1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=a8("span",[a.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(cp(b,c.line,c,d,a)||c.line!=d.line&&cp(b,d.line,c,d,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");ca=!0}a.addToHistory&&eE(b,{from:c,to:d,origin:"markText"},b.sel,NaN);var s,t=c.line,f=b.cm;if(b.iter(t,d.line+1,function(g){var b,e;f&&a.collapsed&&!f.options.lineWrapping&&cq(g)==f.display.maxLine&&(s=!0),a.collapsed&&t!=c.line&&bO(g,0),b=g,e=new cb(a,t==c.line?c.ch:null,t==d.line?d.ch:null),b.markedSpans=b.markedSpans?b.markedSpans.concat([e]):[e],e.marker.attachLine(b),++t}),a.collapsed&&b.iter(c.line,d.line+1,function(a){ct(b,a)&&bO(a,0)}),a.clearOnEnter&&at(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(b9=!0,(b.history.done.length||b.history.undone.length)&&b.clearHistory()),a.collapsed&&(a.id=++e8,a.atomic=!0),f){if(s&&(f.curOp.updateMaxLine=!0),a.collapsed)dB(f,c.line,d.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var j=c.line;j<=d.line;j++)dC(f,j,"text");a.atomic&&eT(f.doc),cK(f,"markerAdded",f,a)}return a}m.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,i=a&&!a.curOp;if(i&&d4(a),bz(this,"clear")){var e=this.find();e&&cK(this,"clear",e.from,e.to)}for(var c=null,f=null,g=0;g<this.lines.length;++g){var b=this.lines[g],d=cc(b.markedSpans,this);a&&!this.collapsed?dC(a,bP(b),"text"):a&&(null!=d.to&&(f=bP(b)),null!=d.from&&(c=bP(b))),b.markedSpans=cd(b.markedSpans,d),null==d.from&&this.collapsed&&!ct(this.doc,b)&&a&&bO(b,dt(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var h=0;h<this.lines.length;++h){var j=cq(this.lines[h]),k=cw(j);k>a.display.maxLineLength&&(a.display.maxLine=j,a.display.maxLineLength=k,a.display.maxLineChanged=!0)}null!=c&&a&&this.collapsed&&dB(a,c,f+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&eT(a.doc)),a&&cK(a,"markerCleared",a,this,c,f),i&&d5(a),this.parent&&this.parent.clear()}},m.prototype.find=function(b,g){var c,e;null==b&&"bookmark"==this.type&&(b=1);for(var f=0;f<this.lines.length;++f){var a=this.lines[f],d=cc(a.markedSpans,this);if(null!=d.from&&(c=aI(g?a:bP(a),d.from),-1==b))return c;if(null!=d.to&&(e=aI(g?a:bP(a),d.to),1==b))return e}return c&&{from:c,to:e}},m.prototype.changed=function(){var c=this,b=this.find(-1,!0),d=this,a=this.doc.cm;b&&a&&ea(a,function(){var e=b.line,h=bP(b.line),f=c4(a,h);if(f&&(db(f),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!ct(d.doc,e)&&null!=d.height){var i=d.height;d.height=null;var g=cW(d)-i;g&&bO(e,e.height+g)}cK(a,"markerChanged",a,c)})},m.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;a.maybeHiddenMarkers&& -1!=ah(a.maybeHiddenMarkers,this)||(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)},m.prototype.detachLine=function(b){if(this.lines.splice(ah(this.lines,b),1),!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this)}},o(m);var z=function(a,c){this.markers=a,this.primary=c;for(var b=0;b<a.length;++b)a[b].parent=this};function fa(a){return a.findMarks(aI(a.first,0),a.clipPos(aI(a.lastLine())),function(a){return a.parent})}function fb(b){for(var a=0;a<b.length;a++)!function(e){var a=b[e],f=[a.primary.doc];ey(a.primary.doc,function(a){return f.push(a)});for(var c=0;c<a.markers.length;c++){var d=a.markers[c];-1==ah(f,d.doc)&&(d.parent=null,a.markers.splice(c--,1))}}(a)}z.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();cK(this,"clear")}},z.prototype.find=function(a,b){return this.primary.find(a,b)},o(z);var fc=0,j=function(b,d,a,e,f){if(!(this instanceof j))return new j(b,d,a,e,f);null==a&&(a=0),T.call(this,[new aO([new F("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=a;var c=aI(a,0);this.sel=es(c),this.history=new eB(null),this.id=++fc,this.modeOption=d,this.lineSep=e,this.direction="rtl"==f?"rtl":"ltr",this.extend=!1,"string"==typeof b&&(b=this.splitLines(b)),ex(this,{from:c,to:c,text:b}),eQ(this,es(c),bd)};j.prototype=ak(T.prototype,{constructor:j,iter:function(a,c,b){b?this.iterN(a-this.first,c-a,b):this.iterN(this.first,this.first+this.size,a)},insert:function(d,a){for(var c=0,b=0;b<a.length;++b)c+=a[b].height;this.insertInner(d-this.first,a,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=bN(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:e(function(c){var a=aI(this.first,0),b=this.first+this.size-1;eZ(this,{from:a,to:aI(b,bL(this,b).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),this.cm&&dV(this.cm,0,0),eQ(this,es(a),bd)}),replaceRange:function(c,a,b,d){e2(this,c,a=bY(this,a),b=b?bY(this,b):a,d)},getRange:function(c,d,a){var b=bM(this,bY(this,c),bY(this,d));return!1===a?b:b.join(a||this.lineSeparator())},getLine:function(b){var a=this.getLineHandle(b);return a&&a.text},getLineHandle:function(a){if(bR(this,a))return bL(this,a)},getLineNumber:function(a){return bP(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=bL(this,a)),cq(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return bY(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a|| !1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:e(function(a,b,c){eO(this,bY(this,"number"==typeof a?aI(a,b||0):a),null,c)}),setSelection:e(function(a,b,c){eO(this,bY(this,a),bY(this,b||a),c)}),extendSelection:e(function(b,a,c){eL(this,bY(this,b),a&&bY(this,a),c)}),extendSelections:e(function(a,b){eM(this,bZ(this,a),b)}),extendSelectionsBy:e(function(a,b){eM(this,bZ(this,bh(this.sel.ranges,a)),b)}),setSelections:e(function(a,c,e){if(a.length){for(var d=[],b=0;b<a.length;b++)d[b]=new H(bY(this,a[b].anchor),bY(this,a[b].head));null==c&&(c=Math.min(a.length-1,this.sel.primIndex)),eQ(this,er(this.cm,d,c),e)}}),addSelection:e(function(b,c,d){var a=this.sel.ranges.slice(0);a.push(new H(bY(this,b),bY(this,c||b))),eQ(this,er(this.cm,a,a.length-1),d)}),getSelection:function(d){for(var a,c=this.sel.ranges,b=0;b<c.length;b++){var e=bM(this,c[b].from(),c[b].to());a=a?a.concat(e):e}return!1===d?a:a.join(d||this.lineSeparator())},getSelections:function(d){for(var e=[],b=this.sel.ranges,a=0;a<b.length;a++){var c=bM(this,b[a].from(),b[a].to());!1!==d&&(c=c.join(d||this.lineSeparator())),e[a]=c}return e},replaceSelection:function(c,d,e){for(var b=[],a=0;a<this.sel.ranges.length;a++)b[a]=c;this.replaceSelections(b,d,e||"+input")},replaceSelections:e(function(h,c,i){for(var b=[],e=this.sel,a=0;a<e.ranges.length;a++){var f=e.ranges[a];b[a]={from:f.from(),to:f.to(),text:this.splitLines(h[a]),origin:i}}for(var g=c&&"end"!=c&&function(d,i,l){for(var e=[],b=aI(d.first,0),f=b,a=0;a<i.length;a++){var g=i[a],c=ev(g.from,b,f),h=ev(aL(g),b,f);if(b=g.to,f=h,"around"==l){var j=d.sel.ranges[a],k=0>aJ(j.head,j.anchor);e[a]=new H(k?h:c,k?c:h)}else e[a]=new H(c,c)}return new t(e,d.sel.primIndex)}(this,b,c),d=b.length-1;0<=d;d--)eZ(this,b[d]);g?eP(this,g):this.cm&&dU(this.cm)}),undo:e(function(){e_(this,"undo")}),redo:e(function(){e_(this,"redo")}),undoSelection:e(function(){e_(this,"undo",!0)}),redoSelection:e(function(){e_(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,d=0,e=0,b=0;b<a.done.length;b++)a.done[b].ranges|| ++d;for(var c=0;c<a.undone.length;c++)a.undone[c].ranges|| ++e;return{undo:d,redo:e}},clearHistory:function(){this.history=new eB(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:eJ(this.history.done),undone:eJ(this.history.undone)}},setHistory:function(a){var b=this.history=new eB(this.history.maxGeneration);b.done=eJ(a.done.slice(0),null,!0),b.undone=eJ(a.undone.slice(0),null,!0)},setGutterMarker:e(function(a,b,c){return e6(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return!(d[b]=c)&&bl(d)&&(a.gutterMarkers=null),!0})}),clearGutter:e(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&e6(b,c,"gutter",function(){return c.gutterMarkers[a]=null,bl(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!bR(this,a)||!(a=bL(this,b=a)))return null}else if(null==(b=bP(a)))return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:e(function(a,b,c){return e6(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(a5(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:e(function(a,b,c){return e6(this,a,"gutter"==b?"gutter":"class",function(e){var f="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",a=e[f];if(!a)return!1;if(null==c)e[f]=null;else{var d=a.match(a5(c));if(!d)return!1;var g=d.index+d[0].length;e[f]=a.slice(0,d.index)+(d.index&&g!=a.length?" ":"")+a.slice(g)||null}return!0})}),addLineWidget:e(function(g,h,i){var c,b,e,f,d,a;return c=this,b=g,e=h,f=i,d=new y(c,e,f),a=c.cm,a&&d.noHScroll&&(a.display.alignWidgets=!0),e6(c,b,"widget",function(b){var e=b.widgets||(b.widgets=[]);if(null==d.insertAt?e.push(d):e.splice(Math.min(e.length-1,Math.max(0,d.insertAt)),0,d),d.line=b,a&&!ct(c,b)){var f=cv(b)<c.scrollTop;bO(b,b.height+cW(d)),f&&dT(a,d.height),a.curOp.forceUpdate=!0}return!0}),a&&cK(a,"lineWidgetAdded",a,d,"number"==typeof b?b:bP(b)),d}),removeLineWidget:function(a){a.clear()},markText:function(b,c,a){return e9(this,bY(this,b),bY(this,c),a,a&&a.type||"range")},setBookmark:function(b,a){var c={replacedWith:a&&(null==a.nodeType?a.widget:a),insertLeft:a&&a.insertLeft,clearWhenEmpty:!1,shared:a&&a.shared,handleMouseEvents:a&&a.handleMouseEvents};return e9(this,b=bY(this,b),b,c,"bookmark")},findMarksAt:function(b){var e=[],c=bL(this,(b=bY(this,b)).line).markedSpans;if(c)for(var d=0;d<c.length;++d){var a=c[d];(null==a.from||a.from<=b.ch)&&(null==a.to||a.to>=b.ch)&&e.push(a.marker.parent||a.marker)}return e},findMarks:function(a,b,d){a=bY(this,a),b=bY(this,b);var c=[],e=a.line;return this.iter(a.line,b.line+1,function(i){var g=i.markedSpans;if(g)for(var h=0;h<g.length;h++){var f=g[h];null!=f.to&&e==a.line&&a.ch>=f.to||null==f.from&&e!=a.line||null!=f.from&&e==b.line&&f.from>=b.ch||d&&!d(f.marker)||c.push(f.marker.parent||f.marker)}++e}),c},getAllMarks:function(){var a=[];return this.iter(function(d){var b=d.markedSpans;if(b)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)}),a},posFromIndex:function(c){var a,b=this.first,d=this.lineSeparator().length;return this.iter(function(f){var e=f.text.length+d;if(c<e)return a=c,!0;c-=e,++b}),bY(this,aI(b,a))},indexFromPos:function(a){var b=(a=bY(this,a)).ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(b){var a=new j(bN(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return a.scrollTop=this.scrollTop,a.scrollLeft=this.scrollLeft,a.sel=this.sel,a.extend=!1,b&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory())),a},linkedDoc:function(a){a=a||{};var c=this.first,d=this.first+this.size;null!=a.from&&a.from>c&&(c=a.from),null!=a.to&&a.to<d&&(d=a.to);var b=new j(bN(this,c,d),a.mode||this.modeOption,c,this.lineSep,this.direction);return a.sharedHist&&(b.history=this.history),(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist}),b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],function(b,d){for(var c=0;c<d.length;c++){var a=d[c],e=a.find(),f=b.clipPos(e.from),g=b.clipPos(e.to);if(aJ(f,g)){var h=e9(b,f,g,a.primary,a.primary.type);a.markers.push(h),h.parent=a}}}(b,fa(this)),b},unlinkDoc:function(a){if(a instanceof g&&(a=a.doc),this.linked){for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1),a.unlinkDoc(this),fb(fa(this));break}}if(a.history==this.history){var c=[a.id];ey(a,function(a){return c.push(a.id)},!0),a.history=new eB(null),a.history.done=eJ(this.history.done,c),a.history.undone=eJ(this.history.undone,c)}},iterLinkedDocs:function(a){ey(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):az(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:e(function(a){var b;"rtl"!=a&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&ea(b=this.cm,function(){eA(b),dB(b)}))})}),j.prototype.eachLine=j.prototype.iter;var fd=0;function fe(b){var a=this;if(ff(a),!bx(a,b)&&!cX(a.display,b)){aw(b),w&&(fd=+new Date);var d=dz(a,b,!0),e=b.dataTransfer.files;if(d&&!a.isReadOnly()){if(e&&e.length&&window.FileReader&&window.File)for(var h=e.length,k=Array(h),l=0,j=function(b,e){if(!a.options.allowDropFileTypes|| -1!=ah(a.options.allowDropFileTypes,b.type)){var c=new FileReader;c.onload=eb(a,function(){var b=c.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(b)&&(b=""),k[e]=b,++l==h){var f={from:d=bY(a.doc,d),to:d,text:a.doc.splitLines(k.join(a.doc.lineSeparator())),origin:"paste"};eZ(a.doc,f),eP(a.doc,es(d,aL(f)))}}),c.readAsText(b)}},f=0;f<h;++f)j(e[f],f);else{if(a.state.draggingText&& -1<a.doc.sel.contains(d))return a.state.draggingText(b),void setTimeout(function(){return a.display.input.focus()},20);try{var c,i=b.dataTransfer.getData("Text");if(i){if(a.state.draggingText&&!a.state.draggingText.copy&&(c=a.listSelections()),eR(a.doc,es(d,d)),c)for(var g=0;g<c.length;++g)e2(a.doc,"",c[g].anchor,c[g].head,"drag");a.replaceSelection(i,"around","paste"),a.display.input.focus()}}catch(m){}}}}}function ff(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function fg(e){if(document.getElementsByClassName){for(var c=document.getElementsByClassName("CodeMirror"),a=[],b=0;b<c.length;b++){var d=c[b].CodeMirror;d&&a.push(d)}a.length&&a[0].operation(function(){for(var b=0;b<a.length;b++)e(a[b])})}}var fh=!1;function fi(){var a;fh||(at(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,fg(fj)},100))}),at(window,"blur",function(){return fg(dO)}),fh=!0)}function fj(b){var a=b.display;a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.scrollbarsClipped=!1,b.setSize()}for(var p={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},u=0;u<10;u++)p[u+48]=p[u+96]=String(u);for(var A=65;A<=90;A++)p[A]=String.fromCharCode(A);for(var v=1;v<=12;v++)p[v+111]=p[v+63235]="F"+v;var k={};function fk(a){var e,f,g,h,c=a.split(/-(?!$)/);a=c[c.length-1];for(var d=0;d<c.length-1;d++){var b=c[d];if(/^(cmd|meta|m)$/i.test(b))h=!0;else if(/^a(lt)?$/i.test(b))e=!0;else if(/^(c|ctrl|control)$/i.test(b))f=!0;else{if(!/^s(hift)?$/i.test(b))throw new Error("Unrecognized modifier name: "+b);g=!0}}return e&&(a="Alt-"+a),f&&(a="Ctrl-"+a),h&&(a="Cmd-"+a),g&&(a="Shift-"+a),a}function aP(b,a,d,e){var c=(a=fm(a)).call?a.call(b,e):a[b];if(!1===c)return"nothing";if("..."===c)return"multi";if(null!=c&&d(c))return"handled";if(a.fallthrough){if("[object Array]"!=Object.prototype.toString.call(a.fallthrough))return aP(b,a.fallthrough,d,e);for(var f=0;f<a.fallthrough.length;f++){var g=aP(b,a.fallthrough[f],d,e);if(g)return g}}}function aQ(b){var a="string"==typeof b?b:p[b.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function fl(a,b,d){var c=a;return b.altKey&&"Alt"!=c&&(a="Alt-"+a),(a3?b.metaKey:b.ctrlKey)&&"Ctrl"!=c&&(a="Ctrl-"+a),(a3?b.ctrlKey:b.metaKey)&&"Cmd"!=c&&(a="Cmd-"+a),!d&&b.shiftKey&&"Shift"!=c&&(a="Shift-"+a),a}function aR(a,c){if(C&&34==a.keyCode&&a.char)return!1;var b=p[a.keyCode];return null!=b&&!a.altGraphKey&&(3==a.keyCode&&a.code&&(b=a.code),fl(b,a,c))}function fm(a){return"string"==typeof a?k[a]:a}function fn(d,g){for(var e=d.doc.sel.ranges,a=[],c=0;c<e.length;c++){for(var b=g(e[c]);a.length&&0>=aJ(b.from,$(a).to);){var f=a.pop();if(0>aJ(f.from,b.from)){b.from=f.from;break}}a.push(b)}ea(d,function(){for(var b=a.length-1;0<=b;b--)e2(d.doc,"",a[b].from,a[b].to,"+delete");dU(d)})}function fo(b,d,c){var a=bo(b.text,d+c,c);return a<0||a>b.text.length?null:a}function fp(d,a,b){var c=fo(d,a.ch,b);return null==c?null:new aI(a.line,c,b<0?"after":"before")}function fq(i,e,d,g,a){if(i){var f=bu(d,e.doc.direction);if(f){var b,c=a<0?$(f):f[0],h=a<0==(1==c.level)?"after":"before";if(0<c.level||"rtl"==e.doc.direction){var j=c5(e,d),k=c6(e,j,b=a<0?d.text.length-1:0).top;b=bp(function(a){return c6(e,j,a).top==k},a<0==(1==c.level)?c.from:c.to-1,b),"before"==h&&(b=fo(d,b,1))}else b=a<0?c.to:c.from;return new aI(g,b,h)}}return new aI(g,a<0?d.text.length:0,a<0?"before":"after")}k.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},k.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},k.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},k.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},k.default=O?k.macDefault:k.pcDefault;var aS={selectAll:aN,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),bd)},killLine:function(a){return fn(a,function(b){if(b.empty()){var c=bL(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:aI(b.head.line+1,0)}:{from:b.head,to:aI(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return fn(a,function(b){return{from:aI(b.from().line,0),to:bY(a.doc,aI(b.to().line+1,0))}})},delLineLeft:function(a){return fn(a,function(a){return{from:aI(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return fn(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return fn(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(aI(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(aI(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return fr(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return fs(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(f){var c,b,d,e;return c=a,b=f.head.line,(e=function(a){for(var b;b=cn(a);)a=b.find(1,!0).line;return a}(d=bL(c.doc,b)))!=d&&(b=bP(e)),fq(!0,c,d,b,-1)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},bf)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},bf)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(c){var d=a.cursorCoords(c.head,"div").top+5,b=a.coordsChar({left:0,top:d},"div");return b.ch<a.getLine(b.line).search(/\S/)?fs(a,c.head):b},bf)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var d=[],e=a.listSelections(),b=a.options.tabSize,c=0;c<e.length;c++){var f=e[c].from(),g=ag(a.getLine(f.line),f.ch,b);d.push(_(b-g%b))}a.replaceSelections(d)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return ea(a,function(){for(var f=a.listSelections(),g=[],d=0;d<f.length;d++)if(f[d].empty()){var b=f[d].head,c=bL(a.doc,b.line).text;if(c){if(b.ch==c.length&&(b=new aI(b.line,b.ch-1)),0<b.ch)b=new aI(b.line,b.ch+1),a.replaceRange(c.charAt(b.ch-1)+c.charAt(b.ch-2),aI(b.line,b.ch-2),b,"+transpose");else if(b.line>a.doc.first){var e=bL(a.doc,b.line-1).text;e&&(b=new aI(b.line,1),a.replaceRange(c.charAt(0)+a.doc.lineSeparator()+e.charAt(e.length-1),aI(b.line-1,e.length-1),b,"+transpose"))}}g.push(new H(b,b))}a.setSelections(g)})},newlineAndIndent:function(a){return ea(a,function(){for(var b=a.listSelections(),c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(var d=0;d<b.length;d++)a.indentLine(b[d].from().line,null,!0);dU(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function fr(c,a){var d=bL(c.doc,a),b=cq(d);return b!=d&&(a=bP(b)),fq(!0,c,b,a,1)}function fs(c,b){var a=fr(c,b.line),d=bL(c.doc,a.line),e=bu(d,c.doc.direction);if(e&&0!=e[0].level)return a;var f=Math.max(0,d.text.search(/\S/)),g=b.line==a.line&&b.ch<=f&&b.ch;return aI(a.line,g?0:f,a.sticky)}function ft(a,b,d){if("string"==typeof b&&!(b=aS[b]))return!1;a.display.input.ensurePolled();var e=a.display.shift,c=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d&&(a.display.shift=!1),c=b(a)!=ai}finally{a.display.shift=e,a.state.suppressEdits=!1}return c}var fu=new Q;function fv(a,b,c,d){var e=a.state.keySeq;if(e){if(aQ(b))return"handled";if(/\'$/.test(b)?a.state.keySeq=null:fu.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),fw(a,e+" "+b,c,d))return!0}return fw(a,b,c,d)}function fw(a,c,d,e){var b=function(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=aP(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&aP(b,a.options.extraKeys,c,a)||aP(b,a.options.keyMap,c,a)}(a,c,e);return"multi"==b&&(a.state.keySeq=c),"handled"==b&&cK(a,"keyHandled",a,c,d),"handled"!=b&&"multi"!=b||(aw(d),dK(a)),!!b}function fx(b,a){var c=aR(a,!0);return!!c&&(a.shiftKey&&!b.state.keySeq?fv(b,"Shift-"+c,a,function(a){return ft(b,a,!0)})||fv(b,c,a,function(a){if("string"==typeof a?/^go[A-Z]/.test(a):a.motion)return ft(b,a)}):fv(b,c,a,function(a){return ft(b,a)}))}var fy=null;function aT(a){var b=this;if(b.curOp.focus=a9(),!bx(b,a)){w&&U<11&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=fx(b,a);C&&(fy=d?c:null,!d&&88==c&&!bJ&&(O?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||function(b){var c=b.display.lineDiv;function a(b){18!=b.keyCode&&b.altKey||(ac(c,"CodeMirror-crosshair"),au(document,"keyup",a),au(document,"mouseover",a))}af(c,"CodeMirror-crosshair"),at(document,"keyup",a),at(document,"mouseover",a)}(b)}}function aU(a){16==a.keyCode&&(this.doc.sel.shift=!1),bx(this,a)}function aV(a){if(!(cX(this.display,a)||bx(this,a)||a.ctrlKey&&!a.altKey||O&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(C&&b==fy)return fy=null,void aw(a);if(!C||a.which&&!(a.which<10)||!fx(this,a)){var d,f,g,e=String.fromCharCode(null==c?b:c);"\b"==e||(d=this,fv(d,"'"+e+"'",f=a,function(a){return ft(d,a,!0)}))||this.display.input.onKeyPress(a)}}}var fz,fA,aW=function(a,b,c){this.time=a,this.pos=b,this.button=c};function aX(a){var f=this.display;if(!(bx(this,a)||f.activeTouch&&f.input.supportsTouch())){if(f.input.ensurePolled(),f.shift=a.shiftKey,cX(f,a))N||(f.scroller.draggable=!1,setTimeout(function(){return f.scroller.draggable=!0},100));else if(!fD(this,a)){var i,j,k,x,p,C,q,r,g,b,c,s,m,n,u,v,l,D,E,y,d,F,o,z,A,e=dz(this,a),h=bC(a),B=e?(i=e,j=h,k=+new Date,fA&&fA.compare(k,i,j)?(fz=fA=null,"triple"):fz&&fz.compare(k,i,j)?(fA=new aW(k,i,j),fz=null,"double"):(fz=new aW(k,i,j),fA=null,"single")):"single";window.focus(),1==h&&this.state.selectingText&&this.state.selectingText(a),e&&(x=this,p=h,C=e,q=B,r=a,g="Click","double"==q?g="Double"+g:"triple"==q&&(g="Triple"+g),fv(x,fl(g=(1==p?"Left":2==p?"Middle":"Right")+g,r),r,function(a){if("string"==typeof a&&(a=aS[a]),!a)return!1;var b=!1;try{x.isReadOnly()&&(x.state.suppressEdits=!0),b=a(x,C)!=ai}finally{x.state.suppressEdits=!1}return b}))||(1==h?e?(b=this,c=e,s=B,m=a,w?setTimeout(bb(dL,b),0):b.curOp.focus=a9(),u=function(c,d,a){var e=c.getOption("configureMouse"),b=e?e(c,d,a):{};if(null==b.unit){var f=a2?a.shiftKey&&a.metaKey:a.altKey;b.unit=f?"rectangle":"single"==d?"char":"double"==d?"word":"line"}return(null==b.extend||c.doc.extend)&&(b.extend=c.doc.extend||a.shiftKey),null==b.addNew&&(b.addNew=O?a.metaKey:a.ctrlKey),null==b.moveOnDrag&&(b.moveOnDrag=!(O?a.altKey:a.ctrlKey)),b}(b,s,m),v=b.doc.sel,b.options.dragDrop&&bF&&!b.isReadOnly()&&"single"==s&& -1<(n=v.contains(c))&&(0>aJ((n=v.ranges[n]).from(),c)||0<c.xRel)&&(0<aJ(n.to(),c)||c.xRel<0)?(l=b,D=m,E=c,y=u,d=l.display,F=!1,o=eb(l,function(a){N&&(d.scroller.draggable=!1),l.state.draggingText=!1,au(d.wrapper.ownerDocument,"mouseup",o),au(d.wrapper.ownerDocument,"mousemove",z),au(d.scroller,"dragstart",A),au(d.scroller,"drop",o),F||(aw(a),y.addNew||eL(l.doc,E,null,null,y.extend),N||w&&9==U?setTimeout(function(){d.wrapper.ownerDocument.body.focus(),d.input.focus()},20):d.input.focus())}),z=function(a){F=F||10<=Math.abs(D.clientX-a.clientX)+Math.abs(D.clientY-a.clientY)},A=function(){return F=!0},N&&(d.scroller.draggable=!0),(l.state.draggingText=o).copy=!y.moveOnDrag,d.scroller.dragDrop&&d.scroller.dragDrop(),at(d.wrapper.ownerDocument,"mouseup",o),at(d.wrapper.ownerDocument,"mousemove",z),at(d.scroller,"dragstart",A),at(d.scroller,"drop",o),dM(l),setTimeout(function(){return d.input.focus()},20)):function(d,k,e,b){var h=d.display,c=d.doc;aw(k);var f,a,i=c.sel,g=i.ranges;if(b.addNew&&!b.extend?f=-1<(a=c.sel.contains(e))?g[a]:new H(e,e):(f=c.sel.primary(),a=c.sel.primIndex),"rectangle"==b.unit)b.addNew||(f=new H(e,e)),e=dz(d,k,!0,!0),a=-1;else{var j=fB(d,e,b.unit);f=b.extend?eK(f,j.anchor,j.head,b.extend):j}b.addNew?-1==a?(a=g.length,eQ(c,er(d,g.concat([f]),a),{scroll:!1,origin:"*mouse"})):1<g.length&&g[a].empty()&&"char"==b.unit&&!b.extend?(eQ(c,er(d,g.slice(0,a).concat(g.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),i=c.sel):eN(c,a,f,be):(eQ(c,new t([f],a=0),be),i=c.sel);var o=e,p=h.wrapper.getBoundingClientRect(),q=0;function m(a){d.state.selectingText=!1,q=1/0,a&&(aw(a),h.input.focus()),au(h.wrapper.ownerDocument,"mousemove",n),au(h.wrapper.ownerDocument,"mouseup",l),c.history.lastSelOrigin=null}var n=eb(d,function(g){0!==g.buttons&&bC(g)?function m(j){var n=++q,g=dz(d,j,!0,"rectangle"==b.unit);if(g){if(0!=aJ(g,o)){d.curOp.focus=a9(),function(g){if(0!=aJ(o,g)){if(o=g,"rectangle"==b.unit){for(var j=[],l=d.options.tabSize,s=ag(bL(c,e.line).text,e.ch,l),t=ag(bL(c,g.line).text,g.ch,l),u=Math.min(s,t),v=Math.max(s,t),h=Math.min(e.line,g.line),x=Math.min(d.lastLine(),Math.max(e.line,g.line));h<=x;h++){var n=bL(c,h).text,m=aj(n,u,l);u==v?j.push(new H(aI(h,m),aI(h,m))):n.length>m&&j.push(new H(aI(h,m),aI(h,aj(n,v,l))))}j.length||j.push(new H(e,e)),eQ(c,er(d,i.ranges.slice(0,a).concat(j),a),{origin:"*mouse",scroll:!1}),d.scrollIntoView(g)}else{var p,q=f,k=fB(d,g,b.unit),r=q.anchor;r=0<aJ(k.anchor,r)?(p=k.head,bW(q.from(),k.anchor)):(p=k.anchor,bV(q.to(),k.head));var w=i.ranges.slice(0);w[a]=function(k,c){var a=c.anchor,b=c.head,p=bL(k.doc,a.line);if(0==aJ(a,b)&&a.sticky==b.sticky)return c;var d=bu(p);if(!d)return c;var h=br(d,a.ch,a.sticky),e=d[h];if(e.from!=a.ch&&e.to!=a.ch)return c;var g,f=h+(e.from==a.ch==(1!=e.level)?0:1);if(0==f||f==d.length)return c;if(b.line!=a.line)g=0<(b.line-a.line)*("ltr"==k.doc.direction?1:-1);else{var i=br(d,b.ch,b.sticky),l=i-h||(b.ch-a.ch)*(1==e.level?-1:1);g=i==f-1||i==f?l<0:0<l}var j=d[f+(g?-1:0)],m=g==(1==j.level),n=m?j.from:j.to,o=m?"after":"before";return a.ch==n&&a.sticky==o?c:new H(new aI(a.line,n,o),b)}(d,new H(bY(c,r),p)),eQ(c,er(d,w,a),be)}}}(g);var k=dR(h,c);(g.line>=k.to||g.line<k.from)&&setTimeout(eb(d,function(){q==n&&m(j)}),150)}else{var l=j.clientY<p.top?-20:j.clientY>p.bottom?20:0;l&&setTimeout(eb(d,function(){q==n&&(h.scroller.scrollTop+=l,m(j))}),50)}}}(g):m(g)}),l=eb(d,m);d.state.selectingText=l,at(h.wrapper.ownerDocument,"mousemove",n),at(h.wrapper.ownerDocument,"mouseup",l)}(b,m,c,u)):bB(a)==f.scroller&&aw(a):2==h?(e&&eL(this.doc,e),setTimeout(function(){return f.input.focus()},20)):3==h&&(a4?this.display.input.onContextMenu(a):dM(this)))}}}function fB(c,a,b){if("char"==b)return new H(a,a);if("word"==b)return c.findWordAt(a);if("line"==b)return new H(aI(a.line,0),bY(c.doc,aI(a.line+1,0)));var d=b(c,a);return new H(d.from,d.to)}function fC(b,a,f,i){if(a.touches)j=a.touches[0].clientX,d=a.touches[0].clientY;else try{j=a.clientX,d=a.clientY}catch(k){return!1}if(j>=Math.floor(b.display.gutters.getBoundingClientRect().right))return!1;i&&aw(a);var j,d,e=b.display,g=e.lineDiv.getBoundingClientRect();if(d>g.bottom||!bz(b,f))return bA(a);d-=g.top-e.viewOffset;for(var c=0;c<b.display.gutterSpecs.length;++c){var h=e.gutters.childNodes[c];if(h&&h.getBoundingClientRect().right>=j)return av(b,f,b,bQ(b.doc,d),b.display.gutterSpecs[c].className,a),bA(a)}}function fD(a,b){return fC(a,b,"gutterClick",!0)}function fE(a,b){var c,d;cX(a.display,b)||(c=a,d=b,bz(c,"gutterContextMenu")&&fC(c,d,"gutterContextMenu",!1))||bx(a,b,"contextmenu")||a4||a.display.input.onContextMenu(b)}function fF(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),dd(a)}aW.prototype.compare=function(a,b,c){return this.time+400>a&&0==aJ(b,this.pos)&&c==this.button};var aY={toString:function(){return"CodeMirror.Init"}},aZ={},a$={};function g(f,a){var h=this;if(!(this instanceof g))return new g(f,a);this.options=a=a?bc(a):{},bc(aZ,a,!1);var b=a.value;"string"==typeof b?b=new j(b,a.mode,null,a.lineSeparator,a.direction):a.mode&&(b.modeOption=a.mode),this.doc=b;var i=new g.inputStyles[a.inputStyle](this),c=this.display=new en(f,b,i,a);for(var d in fF(c.wrapper.CodeMirror=this),a.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),d2(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Q,keySeq:null,specialChars:null},a.autofocus&&!Z&&c.input.focus(),w&&U<11&&setTimeout(function(){return h.display.input.reset(!0)},20),function(b){var a=b.display;at(a.scroller,"mousedown",eb(b,aX)),at(a.scroller,"dblclick",w&&U<11?eb(b,function(a){if(!bx(b,a)){var c=dz(b,a);if(c&&!fD(b,a)&&!cX(b.display,a)){aw(a);var d=b.findWordAt(c);eL(b.doc,d.anchor,d.head)}}}):function(a){return bx(b,a)||aw(a)}),at(a.scroller,"contextmenu",function(a){return fE(b,a)});var e,f={end:0};function d(){a.activeTouch&&(e=setTimeout(function(){return a.activeTouch=null},1e3),(f=a.activeTouch).end=+new Date)}function g(b,a){if(null==a.left)return!0;var c=a.left-b.left,d=a.top-b.top;return 400<c*c+d*d}at(a.scroller,"touchstart",function(c){if(!bx(b,c)&&!function(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}(c)&&!fD(b,c)){a.input.ensurePolled(),clearTimeout(e);var d=+new Date;a.activeTouch={start:d,moved:!1,prev:d-f.end<=300?f:null},1==c.touches.length&&(a.activeTouch.left=c.touches[0].pageX,a.activeTouch.top=c.touches[0].pageY)}}),at(a.scroller,"touchmove",function(){a.activeTouch&&(a.activeTouch.moved=!0)}),at(a.scroller,"touchend",function(h){var c=a.activeTouch;if(c&&!cX(a,h)&&null!=c.left&&!c.moved&&new Date-c.start<300){var f,e=b.coordsChar(a.activeTouch,"page");f=!c.prev||g(c,c.prev)?new H(e,e):!c.prev.prev||g(c,c.prev.prev)?b.findWordAt(e):new H(aI(e.line,0),bY(b.doc,aI(e.line+1,0))),b.setSelection(f.anchor,f.head),b.focus(),aw(h)}d()}),at(a.scroller,"touchcancel",d),at(a.scroller,"scroll",function(){a.scroller.clientHeight&&(dY(b,a.scroller.scrollTop),d$(b,a.scroller.scrollLeft,!0),av(b,"scroll",b))}),at(a.scroller,"mousewheel",function(a){return eq(b,a)}),at(a.scroller,"DOMMouseScroll",function(a){return eq(b,a)}),at(a.wrapper,"scroll",function(){return a.wrapper.scrollTop=a.wrapper.scrollLeft=0}),a.dragFunctions={enter:function(a){bx(b,a)||ay(a)},over:function(a){bx(b,a)||(function(a,d){var b=dz(a,d);if(b){var c=document.createDocumentFragment();dH(a,b,c),a.display.dragCursor||(a.display.dragCursor=ad("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),a7(a.display.dragCursor,c)}}(b,a),ay(a))},start:function(a){return function(c,b){if(w&&(!c.state.draggingText|| +new Date-fd<100))ay(b);else if(!bx(c,b)&&!cX(c.display,b)&&(b.dataTransfer.setData("Text",c.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!X)){var a=ad("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(a.width=a.height=1,c.display.wrapper.appendChild(a),a._top=a.offsetTop),b.dataTransfer.setDragImage(a,0,0),C&&a.parentNode.removeChild(a)}}(b,a)},drop:eb(b,fe),leave:function(a){bx(b,a)||ff(b)}};var c=a.input.getField();at(c,"keyup",function(a){return aU.call(b,a)}),at(c,"keydown",eb(b,aT)),at(c,"keypress",eb(b,aV)),at(c,"focus",function(a){return dN(b,a)}),at(c,"blur",function(a){return dO(b,a)})}(this),fi(),d4(this),this.curOp.forceUpdate=!0,ez(this,b),a.autofocus&&!Z||this.hasFocus()?setTimeout(bb(dN,this),20):dO(this),a$)a$.hasOwnProperty(d)&&a$[d](h,a[d],aY);ek(this),a.finishInit&&a.finishInit(this);for(var e=0;e<fG.length;++e)fG[e](h);d5(this),N&&a.lineWrapping&&"optimizelegibility"==getComputedStyle(c.lineDiv).textRendering&&(c.lineDiv.style.textRendering="auto")}g.defaults=aZ,g.optionHandlers=a$;var fG=[];function fH(f,d,a,m){var n,c=f.doc;null==a&&(a="add"),"smart"==a&&(c.mode.indent?n=b1(f,d).state:a="prev");var h=f.options.tabSize,e=bL(c,d),k=ag(e.text,null,h);e.stateAfter&&(e.stateAfter=null);var b,g=e.text.match(/^\s*/)[0];if(m||/\S/.test(e.text)){if("smart"==a&&((b=c.mode.indent(n,e.text.slice(g.length),e.text))==ai||150<b)){if(!m)return;a="prev"}}else b=0,a="not";"prev"==a?b=d>c.first?ag(bL(c,d-1).text,null,h):0:"add"==a?b=k+f.options.indentUnit:"subtract"==a?b=k-f.options.indentUnit:"number"==typeof a&&(b=k+a),b=Math.max(0,b);var i="",l=0;if(f.options.indentWithTabs)for(var o=Math.floor(b/h);o;--o)l+=h,i+="	";if(l<b&&(i+=_(b-l)),i!=g)return e2(c,i,aI(d,0),aI(d,g.length),"+input"),e.stateAfter=null,!0;for(var j=0;j<c.sel.ranges.length;j++){var p=c.sel.ranges[j];if(p.head.line==d&&p.head.ch<g.length){var q=aI(d,g.length);eN(c,j,new H(q,q));break}}}g.defineInitHook=function(a){return fG.push(a)};var fI=null;function fJ(a,f,j,b,n){var k=a.doc;a.display.shift=!1,b=b||k.sel;var o=+new Date-200,g="paste"==n||a.state.pasteIncoming>o,h=az(f),c=null;if(g&&1<b.ranges.length){if(fI&&fI.text.join("\n")==f){if(b.ranges.length%fI.text.length==0){c=[];for(var l=0;l<fI.text.length;l++)c.push(k.splitLines(fI.text[l]))}}else h.length==b.ranges.length&&a.options.pasteLinesPerSelection&&(c=bh(h,function(a){return[a]}))}for(var q=a.curOp.updateInput,i=b.ranges.length-1;0<=i;i--){var m=b.ranges[i],d=m.from(),e=m.to();m.empty()&&(j&&0<j?d=aI(d.line,d.ch-j):a.state.overwrite&&!g?e=aI(e.line,Math.min(bL(k,e.line).text.length,e.ch+$(h).length)):g&&fI&&fI.lineWise&&fI.text.join("\n")==f&&(d=e=aI(d.line,0)));var p={from:d,to:e,text:c?c[i%c.length]:h,origin:n||(g?"paste":a.state.cutIncoming>o?"cut":"+input")};eZ(a.doc,p),cK(a,"inputRead",a,p)}f&&!g&&fL(a,f),dU(a),a.curOp.updateInput<2&&(a.curOp.updateInput=q),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function fK(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||ea(b,function(){return fJ(b,c,0,null,"paste")}),!0}function fL(a,h){if(a.options.electricChars&&a.options.smartIndent)for(var e=a.doc.sel,c=e.ranges.length-1;0<=c;c--){var b=e.ranges[c];if(!(100<b.head.ch||c&&e.ranges[c-1].head.line==b.head.line)){var d=a.getModeAt(b.head),f=!1;if(d.electricChars){for(var g=0;g<d.electricChars.length;g++)if(-1<h.indexOf(d.electricChars.charAt(g))){f=fH(a,b.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(bL(a.doc,b.head.line).text.slice(0,b.head.ch))&&(f=fH(a,b.head.line,"smart"));f&&cK(a,"electricInput",a,b.head.line)}}}function fM(a){for(var d=[],e=[],b=0;b<a.doc.sel.ranges.length;b++){var f=a.doc.sel.ranges[b].head.line,c={anchor:aI(f,0),head:aI(f+1,0)};e.push(c),d.push(a.getRange(c.anchor,c.head))}return{text:d,ranges:e}}function fN(a,b,c,d){a.setAttribute("autocorrect",c?"":"off"),a.setAttribute("autocapitalize",d?"":"off"),a.setAttribute("spellcheck",!!b)}function fO(){var a=ad("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=ad("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return N?a.style.width="1000px":a.setAttribute("wrap","off"),D&&(a.style.border="1px solid black"),fN(a),b}function fP(f,a,b,c,p){var l=a,m=b,n=bL(f,a.line);function d(e){var d,c;if(null==(d=p?function(i,d,a,b){var g=bu(d,i.doc.direction);if(!g)return fp(d,a,b);a.ch>=d.text.length?(a.ch=d.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var m=br(g,a.ch,a.sticky),c=g[m];if("ltr"==i.doc.direction&&c.level%2==0&&(0<b?c.to>a.ch:c.from<a.ch))return fp(d,a,b);function j(a,b){return fo(d,a instanceof aI?a.ch:a,b)}function n(a){return i.options.lineWrapping?(q=q||c5(i,d),dq(i,d,q,a)):{begin:0,end:d.text.length}}var q,f=n("before"==a.sticky?j(a,-1):a.ch);if("rtl"==i.doc.direction||1==c.level){var k=1==c.level==b<0,e=j(a,k?1:-1);if(null!=e&&(k?e<=c.to&&e<=f.end:e>=c.from&&e>=f.begin)){var p=k?"before":"after";return new aI(a.line,e,p)}}function o(d,h,e){for(var i=function(b,c){return c?new aI(a.line,j(b,1),"before"):new aI(a.line,b,"after")};0<=d&&d<g.length;d+=h){var c=g[d],f=0<h==(1!=c.level),b=f?e.begin:j(e.end,-1);if(c.from<=b&&b<c.to||(b=f?c.from:j(c.to,-1),e.begin<=b&&b<e.end))return i(b,f)}}var h=o(m+b,b,f);if(h)return h;var l=0<b?f.end:j(f.begin,-1);return null!=l&&(!(0<b)||l!=d.text.length)&&(h=o(0<b?0:g.length-1,b,n(l)))?h:null}(f.cm,n,a,b):fp(n,a,b))){if(e||!(!((c=a.line+b)<f.first||c>=f.first+f.size)&&(a=new aI(c,a.ch,a.sticky),n=bL(f,c))))return!1;a=fq(p,f.cm,n,a.line,b)}else a=d;return!0}if("char"==c)d();else if("column"==c)d(!0);else if("word"==c||"group"==c)for(var h=null,i="group"==c,o=f.cm&&f.cm.getHelper(a,"wordChars"),g=!0;!(b<0)||d(!g);g=!1){var j=n.text.charAt(a.ch)||"\n",e=bk(j,o)?"w":i&&"\n"==j?"n":!i||/\s/.test(j)?null:"p";if(!i||g||e||(e="s"),h&&h!=e){b<0&&(b=1,d(),a.sticky="after");break}if(e&&(h=e),0<b&&!d(!g))break}var k=eW(f,a,l,m,!0);return bT(l,k)&&(k.hitSide=!0),k}function fQ(d,b,c,f){var a,e,g=d.doc,h=b.left;if("page"==f){var i=Math.min(d.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),j=Math.max(i-.5*dt(d.display),3);a=(0<c?b.bottom:b.top)+c*j}else"line"==f&&(a=0<c?b.bottom+3:b.top-3);for(;(e=dn(d,h,a)).outside;){if(c<0?a<=0:a>=g.height){e.hitSide=!0;break}a+=5*c}return e}function c(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Q,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}function fR(c,a){var d=c4(c,a.line);if(!d||d.hidden)return null;var e=bL(c.doc,a.line),h=c2(d,e,a.line),f=bu(e,c.doc.direction),g="left";f&&(g=br(f,a.ch)%2?"right":"left");var b=c9(h.map,a.ch,g);return b.offset="right"==b.collapse?b.end:b.start,b}function fS(a,b){return b&&(a.bad=!0),a}function fT(b,c,d){var a;if(c==b.display.lineDiv){if(!(a=b.display.lineDiv.childNodes[d]))return fS(b.clipPos(aI(b.display.viewTo-1)),!0);c=null,d=0}else for(a=c;;a=a.parentNode){if(!a||a==b.display.lineDiv)return null;if(a.parentNode&&a.parentNode==b.display.lineDiv)break}for(var e=0;e<b.display.view.length;e++){var f=b.display.view[e];if(f.node==a)return fU(f,c,d)}}function fU(d,a,c){var j=d.text.firstChild,i=!1;if(!a||!ae(j,a))return fS(aI(bP(d.line),0),!0);if(a==j&&(i=!0,a=j.childNodes[c],c=0,!a)){var l=d.rest?$(d.rest):d.line;return fS(aI(bP(l),l.text.length),i)}var e=3==a.nodeType?a:null,f=a;for(e||1!=a.childNodes.length||3!=a.firstChild.nodeType||(e=a.firstChild,c=c&&e.nodeValue.length);f.parentNode!=j;)f=f.parentNode;var o=d.measure,p=o.maps;function k(g,i,e){for(var a=-1;a<(p?p.length:0);a++)for(var c=a<0?o.map:p[a],b=0;b<c.length;b+=3){var f=c[b+2];if(f==g||f==i){var j=bP(a<0?d.line:d.rest[a]),h=c[b]+e;return(e<0||f!=g)&&(h=c[b+(e?1:0)]),aI(j,h)}}}var b=k(e,f,c);if(b)return fS(b,i);for(var g=f.nextSibling,m=e?e.nodeValue.length-c:0;g;g=g.nextSibling){if(b=k(g,g.firstChild,0))return fS(aI(b.line,b.ch-m),i);m+=g.textContent.length}for(var h=f.previousSibling,n=c;h;h=h.previousSibling){if(b=k(h,h.firstChild,-1))return fS(aI(b.line,b.ch+n),i);n+=h.textContent.length}}function d(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new Q,this.hasSelection=!1,this.composing=null}function a(a,c,b,d){fV.defaults[a]=c,b&&(fW[a]=d?function(c,d,a){a!=aY&&b(c,d,a)}:b)}c.prototype.init=function(e){var f=this,c=this,b=c.cm,a=c.div=e.lineDiv;function d(d){if(!bx(b,d)){if(b.somethingSelected())fI={lineWise:!1,text:b.getSelections()},"cut"==d.type&&b.replaceSelection("",null,"cut");else{if(!b.options.lineWiseCopyCut)return;var h=fM(b);fI={lineWise:!0,text:h.text},"cut"==d.type&&b.operation(function(){b.setSelections(h.ranges,0,bd),b.replaceSelection("",null,"cut")})}if(d.clipboardData){d.clipboardData.clearData();var e=fI.text.join("\n");if(d.clipboardData.setData("Text",e),d.clipboardData.getData("Text")==e)return void d.preventDefault()}var f=fO(),g=f.firstChild;b.display.lineSpace.insertBefore(f,b.display.lineSpace.firstChild),g.value=fI.text.join("\n");var i=document.activeElement;P(g),setTimeout(function(){b.display.lineSpace.removeChild(f),i.focus(),i==a&&c.showPrimarySelection()},50)}}fN(a,b.options.spellcheck,b.options.autocorrect,b.options.autocapitalize),at(a,"paste",function(a){bx(b,a)||fK(a,b)||U<=11&&setTimeout(eb(b,function(){return f.updateFromDOM()}),20)}),at(a,"compositionstart",function(a){f.composing={data:a.data,done:!1}}),at(a,"compositionupdate",function(a){f.composing||(f.composing={data:a.data,done:!1})}),at(a,"compositionend",function(a){f.composing&&(a.data!=f.composing.data&&f.readFromDOMSoon(),f.composing.done=!0)}),at(a,"touchstart",function(){return c.forceCompositionEnd()}),at(a,"input",function(){f.composing||f.readFromDOMSoon()}),at(a,"copy",d),at(a,"cut",d)},c.prototype.prepareSelection=function(){var a=dG(this.cm,!1);return a.focus=this.cm.state.focused,a},c.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},c.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},c.prototype.showPrimarySelection=function(){var a=this.getSelection(),b=this.cm,m=b.doc.sel.primary(),g=m.from(),h=m.to();if(b.display.viewTo==b.display.viewFrom||g.line>=b.display.viewTo||h.line<b.display.viewFrom)a.removeAllRanges();else{var i=fT(b,a.anchorNode,a.anchorOffset),j=fT(b,a.focusNode,a.focusOffset);if(!i||i.bad||!j||j.bad||0!=aJ(bW(i,j),g)||0!=aJ(bV(i,j),h)){var l=b.display.view,d=g.line>=b.display.viewFrom&&fR(b,g)||{node:l[0].measure.map[2],offset:0},e=h.line<b.display.viewTo&&fR(b,h);if(!e){var k=l[l.length-1].measure,c=k.maps?k.maps[k.maps.length-1]:k.map;e={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}if(d&&e){var f,n=a.rangeCount&&a.getRangeAt(0);try{f=ab(d.node,d.offset,e.offset,e.node)}catch(o){}f&&(!K&&b.state.focused?(a.collapse(d.node,d.offset),f.collapsed||(a.removeAllRanges(),a.addRange(f))):(a.removeAllRanges(),a.addRange(f)),n&&null==a.anchorNode?a.addRange(n):K&&this.startGracePeriod()),this.rememberSelection()}else a.removeAllRanges()}}},c.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},c.prototype.showMultipleSelections=function(a){a7(this.cm.display.cursorDiv,a.cursors),a7(this.cm.display.selectionDiv,a.selection)},c.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},c.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return ae(this.div,b)},c.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},c.prototype.blur=function(){this.div.blur()},c.prototype.getField=function(){return this.div},c.prototype.supportsTouch=function(){return!0},c.prototype.receivedFocus=function(){var a=this;this.selectionInEditor()?this.pollSelection():ea(this.cm,function(){return a.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function b(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,b))})},c.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},c.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(Y&&W&&this.cm.display.gutterSpecs.length&&function(b){for(var a=b;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}(a.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=fT(b,a.anchorNode,a.anchorOffset),d=fT(b,a.focusNode,a.focusOffset);c&&d&&ea(b,function(){eQ(b.doc,es(c,d),bd),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}}},c.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m,h,n,b=this.cm,c=b.display,p=b.doc.sel.primary(),f=p.from(),i=p.to();if(0==f.ch&&f.line>b.firstLine()&&(f=aI(f.line-1,bL(b.doc,f.line-1).length)),i.ch==bL(b.doc,i.line).text.length&&i.line<b.lastLine()&&(i=aI(i.line+1,0)),f.line<c.viewFrom||i.line>c.viewTo-1)return!1;n=f.line==c.viewFrom||0==(m=dA(b,f.line))?(h=bP(c.view[0].line),c.view[0].node):(h=bP(c.view[m].line),c.view[m-1].node.nextSibling);var j,q,o=dA(b,i.line);if(q=o==c.view.length-1?(j=c.viewTo-1,c.lineDiv.lastChild):(j=bP(c.view[o+1].line)-1,c.view[o+1].node.previousSibling),!n)return!1;for(var a=b.doc.splitLines(function(b,a,c,g,h){var d="",i=!1,j=b.doc.lineSeparator(),e=!1;function k(){i&&(d+=j,e&&(d+=j),i=e=!1)}function l(a){a&&(k(),d+=a)}function f(a){if(1==a.nodeType){var m=a.getAttribute("cm-text");if(m)return void l(m);var c,n=a.getAttribute("cm-marker");if(n){var q,o=b.findMarks(aI(g,0),aI(h+1,0),(q=+n,function(a){return a.id==q}));return void(o.length&&(c=o[0].find(0))&&l(bM(b.doc,c.from,c.to).join(j)))}if("false"!=a.getAttribute("contenteditable")){var p=/^(pre|div|p|li|table|br)$/i.test(a.nodeName);if(/^br$/i.test(a.nodeName)||0!=a.textContent.length){p&&k();for(var d=0;d<a.childNodes.length;d++)f(a.childNodes[d]);/^(pre|p)$/i.test(a.nodeName)&&(e=!0),p&&(i=!0)}}}else 3==a.nodeType&&l(a.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;f(a),a!=c;)a=a.nextSibling,e=!1;return d}(b,n,q,h,j)),d=bM(b.doc,aI(h,0),aI(j,bL(b.doc,j).text.length));1<a.length&&1<d.length;)if($(a)==$(d))a.pop(),d.pop(),j--;else{if(a[0]!=d[0])break;a.shift(),d.shift(),h++}for(var e=0,g=0,r=a[0],s=d[0],v=Math.min(r.length,s.length);e<v&&r.charCodeAt(e)==s.charCodeAt(e);)++e;for(var k=$(a),l=$(d),w=Math.min(k.length-(1==a.length?e:0),l.length-(1==d.length?e:0));g<w&&k.charCodeAt(k.length-g-1)==l.charCodeAt(l.length-g-1);)++g;if(1==a.length&&1==d.length&&h==f.line)for(;e&&e>f.ch&&k.charCodeAt(k.length-g-1)==l.charCodeAt(l.length-g-1);)e--,g++;a[a.length-1]=k.slice(0,k.length-g).replace(/^\u200b+/,""),a[0]=a[0].slice(e).replace(/\u200b+$/,"");var t=aI(h,e),u=aI(j,d.length?$(d).length-g:0);return 1<a.length||a[0]||aJ(t,u)?(e2(b.doc,a,t,u,"+input"),!0):void 0},c.prototype.ensurePolled=function(){this.forceCompositionEnd()},c.prototype.reset=function(){this.forceCompositionEnd()},c.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},c.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing){if(!a.composing.done)return;a.composing=null}a.updateFromDOM()},80))},c.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||ea(this.cm,function(){return dB(a.cm)})},c.prototype.setUneditable=function(a){a.contentEditable="false"},c.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||eb(this.cm,fJ)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))},c.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)},c.prototype.onContextMenu=function(){},c.prototype.resetPosition=function(){},c.prototype.needsContentAttribute=!0,d.prototype.init=function(b){var d=this,e=this,f=this.cm;this.createField(b);var a=this.textarea;function c(b){if(!bx(f,b)){if(f.somethingSelected()){var d;fI={lineWise:!1,text:f.getSelections()}}else{if(!f.options.lineWiseCopyCut)return;var c=fM(f);fI={lineWise:!0,text:c.text},"cut"==b.type?f.setSelections(c.ranges,null,bd):(e.prevInput="",a.value=c.text.join("\n"),P(a))}"cut"==b.type&&(f.state.cutIncoming=+new Date)}}b.wrapper.insertBefore(this.wrapper,b.wrapper.firstChild),D&&(a.style.width="0px"),at(a,"input",function(){w&&9<=U&&d.hasSelection&&(d.hasSelection=null),e.poll()}),at(a,"paste",function(a){bx(f,a)||fK(a,f)||(f.state.pasteIncoming=+new Date,e.fastPoll())}),at(a,"cut",c),at(a,"copy",c),at(b.scroller,"paste",function(c){if(!cX(b,c)&&!bx(f,c)){if(!a.dispatchEvent)return f.state.pasteIncoming=+new Date,void e.focus();var d=new Event("paste");d.clipboardData=c.clipboardData,a.dispatchEvent(d)}}),at(b.lineSpace,"selectstart",function(a){cX(b,a)||aw(a)}),at(a,"compositionstart",function(){var a=f.getCursor("from");e.composing&&e.composing.range.clear(),e.composing={start:a,range:f.markText(a,f.getCursor("to"),{className:"CodeMirror-composing"})}}),at(a,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})},d.prototype.createField=function(a){this.wrapper=fO(),this.textarea=this.wrapper.firstChild},d.prototype.prepareSelection=function(){var a=this.cm,b=a.display,g=a.doc,c=dG(a);if(a.options.moveInputWithCursor){var d=dk(a,g.sel.primary().head,"div"),e=b.wrapper.getBoundingClientRect(),f=b.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top)),c.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))}return c},d.prototype.showSelection=function(a){var b=this.cm.display;a7(b.cursorDiv,a.cursors),a7(b.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},d.prototype.reset=function(c){if(!this.contextMenuPending&&!this.composing){var a=this.cm;if(a.somethingSelected()){this.prevInput="";var b=a.getSelection();this.textarea.value=b,a.state.focused&&P(this.textarea),w&&9<=U&&(this.hasSelection=b)}else c||(this.prevInput=this.textarea.value="",w&&9<=U&&(this.hasSelection=null))}},d.prototype.getField=function(){return this.textarea},d.prototype.supportsTouch=function(){return!1},d.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Z||a9()!=this.textarea))try{this.textarea.focus()}catch(a){}},d.prototype.blur=function(){this.textarea.blur()},d.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},d.prototype.receivedFocus=function(){this.slowPoll()},d.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},d.prototype.fastPoll=function(){var b=!1,a=this;a.pollingFast=!0,a.polling.set(20,function c(){a.poll()||b?(a.pollingFast=!1,a.slowPoll()):(b=!0,a.polling.set(60,c))})},d.prototype.poll=function(){var h=this,a=this.cm,e=this.textarea,b=this.prevInput;if(this.contextMenuPending||!a.state.focused||bI(e)&&!b&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var c=e.value;if(c==b&&!a.somethingSelected())return!1;if(w&&9<=U&&this.hasSelection===c||O&&/[\uf700-\uf7ff]/.test(c))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var f=c.charCodeAt(0);if(8203!=f||b||(b="\u200B"),8666==f)return this.reset(),this.cm.execCommand("undo")}for(var d=0,g=Math.min(b.length,c.length);d<g&&b.charCodeAt(d)==c.charCodeAt(d);)++d;return ea(a,function(){fJ(a,c.slice(d),b.length-d,null,h.composing?"*compose":null),1e3<c.length|| -1<c.indexOf("\n")?e.value=h.prevInput="":h.prevInput=c,h.composing&&(h.composing.range.clear(),h.composing.range=a.markText(h.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},d.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},d.prototype.onKeyPress=function(){w&&9<=U&&(this.hasSelection=null),this.fastPoll()},d.prototype.onContextMenu=function(d){var a=this,b=a.cm,c=b.display,e=a.textarea;a.contextMenuPending&&a.contextMenuPending();var f=dz(b,d),j=c.scroller.scrollTop;if(f&&!C){b.options.resetSelectionOnContextMenu&& -1==b.doc.sel.contains(f)&&eb(b,eQ)(b.doc,es(f),bd);var g,k=e.style.cssText,l=a.wrapper.style.cssText,h=a.wrapper.offsetParent.getBoundingClientRect();if(a.wrapper.style.cssText="position: static",e.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(d.clientY-h.top-5)+"px; left: "+(d.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(w?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",N&&(g=window.scrollY),c.input.focus(),N&&window.scrollTo(null,g),c.input.reset(),b.somethingSelected()||(e.value=a.prevInput=" "),a.contextMenuPending=n,c.selForContextMenu=b.doc.sel,clearTimeout(c.detectingSelectAll),w&&9<=U&&m(),a4){ay(d);var i=function(){au(window,"mouseup",i),setTimeout(n,20)};at(window,"mouseup",i)}else setTimeout(n,50)}function m(){if(null!=e.selectionStart){var d=b.somethingSelected(),f="\u200B"+(d?e.value:"");e.value="\u21DA",e.value=f,a.prevInput=d?"":"\u200B",e.selectionStart=1,e.selectionEnd=f.length,c.selForContextMenu=b.doc.sel}}function n(){if(a.contextMenuPending==n&&(a.contextMenuPending=!1,a.wrapper.style.cssText=l,e.style.cssText=k,w&&U<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=j),null!=e.selectionStart)){(!w||w&&U<9)&&m();var f=0,d=function(){c.selForContextMenu==b.doc.sel&&0==e.selectionStart&&0<e.selectionEnd&&"\u200B"==a.prevInput?eb(b,aN)(b):f++ <10?c.detectingSelectAll=setTimeout(d,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(d,200)}}},d.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled="nocursor"==a},d.prototype.setUneditable=function(){},d.prototype.needsContentAttribute=!1,fW=(fV=g).optionHandlers,fV.defineOption=a,fV.Init=aY,a("value","",function(a,b){return a.setValue(b)},!0),a("mode",null,function(a,b){a.doc.modeOption=b,aM(a)},!0),a("indentUnit",2,aM,!0),a("indentWithTabs",!1),a("smartIndent",!0),a("tabSize",4,function(a){I(a),dd(a),dB(a)},!0),a("lineSeparator",null,function(b,d){if(b.doc.lineSep=d){var c=[],e=b.doc.first;b.doc.iter(function(f){for(var b=0;;){var a=f.text.indexOf(d,b);if(-1==a)break;b=a+d.length,c.push(aI(e,a))}e++});for(var a=c.length-1;0<=a;a--)e2(b.doc,d,c[a],aI(c[a].line,c[a].ch+d.length))}}),a("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),c!=aY&&a.refresh()}),a("specialCharPlaceholder",function(b){var a=ad("span","\u2022","cm-invalidchar");return a.title="\\u"+b.charCodeAt(0).toString(16),a.setAttribute("aria-label",a.title),a},function(a){return a.refresh()},!0),a("electricChars",!0),a("inputStyle",Z?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),a("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),a("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0),a("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0),a("rtlMoveVisually",!aa),a("wholeLineUpdateBefore",!0),a("theme","default",function(a){fF(a),S(a)},!0),a("keyMap","default",function(c,e,d){var b=fm(e),a=d!=aY&&fm(d);a&&a.detach&&a.detach(c,b),b.attach&&b.attach(c,a||null)}),a("extraKeys",null),a("configureMouse",null),a("lineWrapping",!1,function(a){a.options.lineWrapping?(af(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(ac(a.display.wrapper,"CodeMirror-wrap"),cx(a)),dy(a),dB(a),dd(a),setTimeout(function(){return d0(a)},100)},!0),a("gutters",[],function(a,b){a.display.gutterSpecs=el(b,a.options.lineNumbers),S(a)},!0),a("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?dw(a.display)+"px":"0",a.refresh()},!0),a("coverGutterNextToScrollbar",!1,function(a){return d0(a)},!0),a("scrollbarStyle","native",function(a){d2(a),d0(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),a("lineNumbers",!1,function(a,b){a.display.gutterSpecs=el(a.options.gutters,b),S(a)},!0),a("firstLineNumber",1,S,!0),a("lineNumberFormatter",function(a){return a},S,!0),a("showCursorWhenSelecting",!1,G,!0),a("resetSelectionOnContextMenu",!0),a("lineWiseCopyCut",!0),a("pasteLinesPerSelection",!0),a("selectionsMayTouch",!1),a("readOnly",!1,function(a,b){"nocursor"==b&&(dO(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),a("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),a("dragDrop",!0,function(a,d,e){if(!d!= !(e&&e!=aY)){var b=a.display.dragFunctions,c=d?at:au;c(a.display.scroller,"dragstart",b.start),c(a.display.scroller,"dragenter",b.enter),c(a.display.scroller,"dragover",b.over),c(a.display.scroller,"dragleave",b.leave),c(a.display.scroller,"drop",b.drop)}}),a("allowDropFileTypes",null),a("cursorBlinkRate",530),a("cursorScrollMargin",0),a("cursorHeight",1,G,!0),a("singleCursorHeightPerLine",!0,G,!0),a("workTime",100),a("workDelay",100),a("flattenSpans",!0,I,!0),a("addModeClass",!1,I,!0),a("pollInterval",100),a("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),a("historyEventDelay",1250),a("viewportMargin",10,function(a){return a.refresh()},!0),a("maxHighlightLength",1e4,I,!0),a("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),a("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),a("autofocus",null),a("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0),a("phrases",null),fY=(fX=g).optionHandlers,fZ=fX.helpers={},fX.prototype={constructor:fX,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,fY.hasOwnProperty(a)&&eb(this,fY[a])(this,b,d),av(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](fm(a))},removeKeyMap:function(c){for(var b=this.state.keyMaps,a=0;a<b.length;++a)if(b[a]==c||b[a].name==c)return b.splice(a,1),!0},addOverlay:i(function(a,b){var c=a.token?a:fX.getMode(this.options,a);if(c.startState)throw new Error("Overlays may not be stateful.");(function(b,c,d){for(var a=0,e=d(c);a<b.length&&d(b[a])<=e;)a++;b.splice(a,0,c)})(this.state.overlays,{mode:c,modeSpec:a,opaque:b&&b.opaque,priority:b&&b.priority||0},function(a){return a.priority}),this.state.modeGen++,dB(this)}),removeOverlay:i(function(b){for(var c=this.state.overlays,a=0;a<c.length;++a){var d=c[a].modeSpec;if(d==b||"string"==typeof b&&d.name==b)return c.splice(a,1),this.state.modeGen++,void dB(this)}}),indentLine:i(function(b,a,c){"string"!=typeof a&&"number"!=typeof a&&(a=null==a?this.options.smartIndent?"smart":"prev":a?"add":"subtract"),bR(this.doc,b)&&fH(this,b,a,c)}),indentSelection:i(function(h){for(var d=this.doc.sel.ranges,c=-1,a=0;a<d.length;a++){var b=d[a];if(b.empty())b.head.line>c&&(fH(this,b.head.line,h,!0),c=b.head.line,a==this.doc.sel.primIndex&&dU(this));else{var e=b.from(),i=b.to(),j=Math.max(c,e.line);c=Math.min(this.lastLine(),i.line-(i.ch?0:1))+1;for(var f=j;f<c;++f)fH(this,f,h);var g=this.doc.sel.ranges;0==e.ch&&d.length==g.length&&0<g[a].from().ch&&eN(this.doc,a,new H(e,g[a].to()),bd)}}}),getTokenAt:function(a,b){return b6(this,a,b)},getLineTokens:function(a,b){return b6(this,aI(a),b,!0)},getTokenTypeAt:function(d){d=bY(this.doc,d);var a,c=b0(this,bL(this.doc,d.line)),g=0,h=(c.length-1)/2,e=d.ch;if(0==e)a=c[2];else for(;;){var b=g+h>>1;if((b?c[2*b-1]:0)>=e)h=b;else{if(!(c[2*b+1]<e)){a=c[2*b+2];break}g=1+b}}var f=a?a.indexOf("overlay "):-1;return f<0?a:0==f?null:a.slice(0,f-1)},getModeAt:function(b){var a=this.doc.mode;return a.innerMode?fX.innerMode(a,this.getTokenAt(b).state).mode:a},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(i,c){var d=[];if(!fZ.hasOwnProperty(c))return d;var b=fZ[c],a=this.getModeAt(i);if("string"==typeof a[c])b[a[c]]&&d.push(b[a[c]]);else if(a[c])for(var e=0;e<a[c].length;e++){var h=b[a[c][e]];h&&d.push(h)}else a.helperType&&b[a.helperType]?d.push(b[a.helperType]):b[a.name]&&d.push(b[a.name]);for(var f=0;f<b._global.length;f++){var g=b._global[f];g.pred(a,this)&& -1==ah(d,g.val)&&d.push(g.val)}return d},getStateAfter:function(a,c){var b=this.doc;return b1(this,(a=bX(b,null==a?b.first+b.size-1:a))+1,c).state},cursorCoords:function(a,c){var b=this.doc.sel.primary();return dk(this,null==a?b.head:"object"==typeof a?bY(this.doc,a):a?b.from():b.to(),c||"page")},charCoords:function(a,b){return dj(this,bY(this.doc,a),b||"page")},coordsChar:function(a,b){return dn(this,(a=di(this,a,b||"page")).left,a.top)},lineAtHeight:function(a,b){return a=di(this,{top:a,left:0},b||"page").top,bQ(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,e,f){var b,c=!1;if("number"==typeof a){var d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:d<a&&(a=d,c=!0),b=bL(this.doc,a)}else b=a;return dh(this,b,{top:0,left:0},e||"page",f||c).top+(c?this.doc.height-cv(b):0)},defaultTextHeight:function(){return dt(this.display)},defaultCharWidth:function(){return du(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(b,a,m,f,i){var g,j,h,d=this.display,e=(b=dk(this,bY(this.doc,b))).bottom,c=b.left;if(a.style.position="absolute",a.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(a),d.sizer.appendChild(a),"over"==f)e=b.top;else if("above"==f||"near"==f){var k=Math.max(d.wrapper.clientHeight,this.doc.height),l=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);("above"==f||b.bottom+a.offsetHeight>k)&&b.top>a.offsetHeight?e=b.top-a.offsetHeight:b.bottom+a.offsetHeight<=k&&(e=b.bottom),c+a.offsetWidth>l&&(c=l-a.offsetWidth)}a.style.top=e+"px",a.style.left=a.style.right="","right"==i?(c=d.sizer.clientWidth-a.offsetWidth,a.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(d.sizer.clientWidth-a.offsetWidth)/2),a.style.left=c+"px"),m&&(g=this,j={left:c,top:e,right:c+a.offsetWidth,bottom:e+a.offsetHeight},null!=(h=dS(g,j)).scrollTop&&dY(g,h.scrollTop),null!=h.scrollLeft&&d$(g,h.scrollLeft))},triggerOnKeyDown:i(aT),triggerOnKeyPress:i(aV),triggerOnKeyUp:aU,triggerOnMouseDown:i(aX),execCommand:function(a){if(aS.hasOwnProperty(a))return aS[a].call(null,this)},triggerElectric:i(function(a){fL(this,a)}),findPosH:function(e,a,f,g){var c=1;a<0&&(c=-1,a=-a);for(var b=bY(this.doc,e),d=0;d<a&&!(b=fP(this.doc,b,c,f,g)).hitSide;++d);return b},moveH:i(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?fP(c.doc,d.head,a,b,c.options.rtlMoveVisually):a<0?d.from():d.to()},bf)}),deleteH:i(function(c,d){var a=this.doc.sel,b=this.doc;a.somethingSelected()?b.replaceSelection("",null,"+delete"):fn(this,function(a){var e=fP(b,a.head,c,d,!1);return c<0?{from:e,to:a.head}:{from:a.head,to:e}})}),findPosV:function(g,a,h,i){var e=1,b=i;a<0&&(e=-1,a=-a);for(var c=bY(this.doc,g),f=0;f<a;++f){var d=dk(this,c,"div");if(null==b?b=d.left:d.left=b,(c=fQ(this,d,e,h)).hitSide)break}return c},moveV:i(function(d,e){var f=this,a=this.doc,c=[],g=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy(function(b){if(g)return d<0?b.from():b.to();var h=dk(f,b.head,"div");null!=b.goalColumn&&(h.left=b.goalColumn),c.push(h.left);var i=fQ(f,h,d,e);return"page"==e&&b==a.sel.primary()&&dT(f,dj(f,i,"div").top-h.top),i},bf),c.length)for(var b=0;b<a.sel.ranges.length;b++)a.sel.ranges[b].goalColumn=c[b]}),findWordAt:function(a){var c=bL(this.doc,a.line).text,b=a.ch,d=a.ch;if(c){var g=this.getHelper(a,"wordChars");("before"==a.sticky||d==c.length)&&b?--b:++d;for(var e=c.charAt(b),f=bk(e,g)?function(a){return bk(a,g)}:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!bk(a)};0<b&&f(c.charAt(b-1));)--b;for(;d<c.length&&f(c.charAt(d));)++d}return new H(aI(a.line,b),aI(a.line,d))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?af(this.display.cursorDiv,"CodeMirror-overwrite"):ac(this.display.cursorDiv,"CodeMirror-overwrite"),av(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==a9()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:i(function(a,b){dV(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-c_(this)-this.display.barHeight,width:a.scrollWidth-c_(this)-this.display.barWidth,clientHeight:c1(this),clientWidth:c0(this)}},scrollIntoView:i(function(a,b){var c,d;null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:aI(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line?(c=this,d=a,dW(c),c.curOp.scrollToPos=d):dX(this,a.from,a.to,a.margin)}),setSize:i(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var e=this;null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&dc(this);var d=this.display.viewFrom;this.doc.iter(d,this.display.viewTo,function(a){if(a.widgets){for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){dC(e,d,"widget");break}}++d}),this.curOp.forceUpdate=!0,av(this,"refresh",this)}),operation:function(a){return ea(this,a)},startOperation:function(){return d4(this)},endOperation:function(){return d5(this)},refresh:i(function(){var a=this.display.cachedTextHeight;dB(this),this.curOp.forceUpdate=!0,dd(this),dV(this,this.doc.scrollLeft,this.doc.scrollTop),eh(this.display),(null==a||.5<Math.abs(a-dt(this.display)))&&dy(this),av(this,"refresh",this)}),swapDoc:i(function(a){var b=this.doc;return b.cm=null,this.state.selectingText&&this.state.selectingText(),ez(this,a),dd(this),this.display.input.reset(),dV(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,cK(this,"swapDoc",this,b),b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},o(fX),fX.registerHelper=function(a,b,c){fZ.hasOwnProperty(a)||(fZ[a]=fX[a]={_global:[]}),fZ[a][b]=c},fX.registerGlobalHelper=function(a,c,d,b){fX.registerHelper(a,c,b),fZ[a]._global.push({pred:d,val:b})};var fV,fW,fX,fY,fZ,b,a_="iter insert remove copy getEditor constructor".split(" ");for(var B in j.prototype)j.prototype.hasOwnProperty(B)&&0>ah(a_,B)&&(g.prototype[B]=function(a){return function(){return a.apply(this.doc,arguments)}}(j.prototype[B]));return o(j),g.inputStyles={textarea:d,contenteditable:c},g.defineMode=function(a){g.defaults.mode||"null"==a||(g.defaults.mode=a),(function(b,a){2<arguments.length&&(a.dependencies=Array.prototype.slice.call(arguments,2)),aA[b]=a}).apply(this,arguments)},g.defineMIME=function(a,b){aB[a]=b},g.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),g.defineMIME("text/plain","null"),g.defineExtension=function(a,b){g.prototype[a]=b},g.defineDocExtension=function(a,b){j.prototype[a]=b},g.fromTextArea=function(b,a){if((a=a?bc(a):{}).value=b.value,!a.tabindex&&b.tabIndex&&(a.tabindex=b.tabIndex),!a.placeholder&&b.placeholder&&(a.placeholder=b.placeholder),null==a.autofocus){var e,c=a9();a.autofocus=c==b||null!=b.getAttribute("autofocus")&&c==document.body}function f(){b.value=h.getValue()}if(b.form&&(at(b.form,"submit",f),!a.leaveSubmitMethodAlone)){var d=b.form;e=d.submit;try{var i=d.submit=function(){f(),d.submit=e,d.submit(),d.submit=i}}catch(j){}}a.finishInit=function(a){a.save=f,a.getTextArea=function(){return b},a.toTextArea=function(){a.toTextArea=isNaN,f(),b.parentNode.removeChild(a.getWrapperElement()),b.style.display="",b.form&&(au(b.form,"submit",f),"function"==typeof b.form.submit&&(b.form.submit=e))}},b.style.display="none";var h=g(function(a){return b.parentNode.insertBefore(a,b.nextSibling)},a);return h},(b=g).off=au,b.on=at,b.wheelEventPixels=function(b){var a=ep(b);return a.x*=x,a.y*=x,a},b.Doc=j,b.splitLines=az,b.countColumn=ag,b.findColumn=aj,b.isWordChar=al,b.Pass=ai,b.signal=av,b.Line=F,b.changeEnd=aL,b.scrollbarModel=aK,b.Pos=aI,b.cmpPos=aJ,b.modes=aA,b.mimeModes=aB,b.resolveMode=aC,b.getMode=aD,b.modeExtensions=aE,b.extendMode=function(a,b){bc(b,aE.hasOwnProperty(a)?aE[a]:aE[a]={})},b.copyState=aF,b.startState=aH,b.innerMode=aG,b.commands=aS,b.keyMap=k,b.keyName=aR,b.isModifierKey=aQ,b.lookupKey=aP,b.normalizeKeyMap=function(a){var d={};for(var b in a)if(a.hasOwnProperty(b)){var h=a[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if("..."==h){delete a[b];continue}for(var e=bh(b.split(" "),fk),f=0;f<e.length;f++){var g=void 0,c=void 0;g=f==e.length-1?(c=e.join(" "),h):(c=e.slice(0,f+1).join(" "),"...");var i=d[c];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+c)}else d[c]=g}delete a[b]}for(var j in d)a[j]=d[j];return a},b.StringStream=f,b.SharedTextMarker=z,b.TextMarker=m,b.LineWidget=y,b.e_preventDefault=aw,b.e_stopPropagation=ax,b.e_stop=ay,b.addClass=af,b.contains=ae,b.rmClass=ac,b.keyNames=p,g.version="5.48.4",g})