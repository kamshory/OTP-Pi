function isReplyable(b){var a=b=b.trim();return!((a=(a=(a=(a=(a=(a=a.split(" ").join("").trim()).split("-").join("").trim()).split("(").join("").trim()).split(")").join("").trim()).split("+").join("").trim()).replace(/[0-9]/g,"").trim()).length>0)}$(document).ready(function(a){$(document).on("click",".message-reply .btn",function(d){var c=$(this).closest(".message-item"),a=c.attr("data-modem-id"),b=c.attr("data-sender");a=encodeURIComponent(a),b=encodeURIComponent(b),window.location="sms.html?modem_id="+a+"&receiver="+b}),$(document).on("click",".load-sms",function(b){var a=$("#modem").val();$(".animation-loading-sms").css({display:"block"}),$.ajax({type:"GET",url:"data/sms/inbox/"+a,dataType:"json",success:function(i){for(var k in $(".message-list").empty(),$(".animation-loading-sms").css({display:"none"}),i){var a=i[k],c=$("<div />");c.attr({"data-modem-id":a.modemID,"data-storage":a.storage,"data-sms-id":a.id,"data-sender":a.phoneNumber}),c.addClass("message-item");var b=$("<div />");b.addClass("message-item-wrapper");var d=$("<div />");d.addClass("message-sender"),d.text(a.phoneNumber);var e=$("<div />");e.addClass("message-date-time"),e.text(a.date.substring(0,19));var f=$("<div />");f.addClass("message-reply"),isReplyable(a.phoneNumber)&&f.html('<button class="btn btn-sm btn-success">Reply</button>');var g=$("<div />");g.addClass("message-sim-card"),g.text(a.modemPort+" - "+a.modemName);var j=$("<div />");j.addClass("message-action");var h=$("<div />");h.addClass("message-message"),h.html(a.content.split("\r\n").join("\r\n<br>")),b.append(e),b.append(d),b.append(f),b.append(g),b.append(j),b.append(h),c.append(b),$(".message-list").append(c)}}})}),$(".message-item").contextmenu(function(a){$(this).hasClass("message-item-selected")?$(this).removeClass("message-item-selected"):$(this).addClass("message-item-selected")}),$(document).on("dblclick",".message-item",function(a){$(this).hasClass("message-item-selected")?$(this).removeClass("message-item-selected"):$(this).addClass("message-item-selected")}),$(document).on("click",".check-all-sms",function(a){$(".message-item").each(function(a){$(this).hasClass("message-item-selected")||$(this).addClass("message-item-selected")})}),$(document).on("click",".uncheck-all-sms",function(a){$(".message-item").each(function(a){$(this).removeClass("message-item-selected")})}),$(document).on("click",".delete-sms",function(a){$(".message-item-selected").each(function(d){var a=$(this).attr("data-modem-id"),b=$(this).attr("data-sms-id"),c=$(this).attr("data-storage");$.ajax({type:"POST",url:"api/delete/sms"+a,dataType:"json",data:{action:"delete-sms",modem_id:a,sms_id:b,storage:c},success:function(a){}}),$(this).slideUp(240,function(a){$(this).remove()})})})})