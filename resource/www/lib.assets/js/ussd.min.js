var dialed=[];function renderNumber(){for(var a=JSON.parse(JSON.stringify(dialed)),b=!1;a.length>14;)a.shift(),b=!0;var c="";c=b?"&#8230; "+a.join(""):a.join(""),$(".dialed-number-text").html(c)}function dialing(a){if(a.length>0){var b=$("#modem").val();$(".dialed-number-result").text(a),$(".ussd").css({display:"block"}),$(".ussd-response").css({display:"none"}),$(".ussd-progress").css({display:"block"}),$(".ussd-response-inner").html("&nbsp;"),$.ajax({url:"api/ussd",type:"POST",data:{ussd:a,execute:"execute",modem_id:b},dataType:"json",success(a){"0000"==a.response_code?$(".ussd-response-inner").html(a.data.message):$(".ussd-response-inner").html(a.response_text),$(".ussd-progress").css({display:"none"}),$(".ussd-response").css({display:"block"})}})}}$(document).ready(function(a){$(document).on("click",".number-button",function(b){var a=$(this).attr("data-value");dialed.push(a),renderNumber()}),$(document).on("click",".dialed-number-delete button",function(a){dialed.length>0&&dialed.pop(),renderNumber()}),$(document).on("click","#ussd-dialer",function(b){var a=dialed.join("").toString();dialed=[],renderNumber(),dialing(a)})})