var mon=new monitor;function loadData(level){$.ajax({type:"GET",url:"/data/interface/list",dataType:"json",success:function(data){renderData(data),0==data.admin.length&&0==level&&setTimeout((function(){loadData(level+1)}),1e3)}})}function renderData(data){for(var i in mon.resetEmail(),data.email)mon.addEmail(data.email[i]);for(var i in mon.resetModem(),data.modem)mon.addModem(data.modem[i]);for(var i in mon.resetAdmin(),data.admin)i<2&&mon.addAdmin(data.admin[i])}function monitor(){this.modems=[],this.resetModem=function(){this.modems=[],$("#modem > *").each((function(e){$(this)[0].style.display="none"}))},this.addModem=function(data){this.modems.push(data);var id="#modem_"+this.modems.length;$(id).length&&($(id).get(0).style.display="block",$(id).get(0).setAttribute("data-id",data.id),$(id+" > text").get(0).firstChild.textContent=data.name)},this.emails=[],this.resetEmail=function(){this.emails=[],$("#email > *").each((function(e){$(this)[0].style.display="none"}))},this.addEmail=function(data){this.emails.push(data);var id="#email_"+this.emails.length;$(id).length>0&&($(id).get(0).style.display="block",$(id).get(0).setAttribute("data-id",data.id),$(id+" > text").get(0).firstChild.textContent=data.name)},this.admins=[],this.resetAdmin=function(){this.admins=[],$("#admin > *").each((function(e){$(this)[0].style.display="none"}))},this.addAdmin=function(data){this.admins.push(data);var id="#admin_"+this.admins.length;$(id).length>0&&($(id).get(0).style.display="block",$(id).get(0).setAttribute("data-id",data.id),$(id+" > text").get(0).firstChild.textContent=data.name)}}function domToJSON(dom){var arr=[];return $(dom).find(" > *").each((function(e){var obj,json=toJSON($(this)[0]);arr.push(json)})),arr}function toJSON(obj){var dom={},attr=obj.getAttributeNames();if(dom.nodeName=obj.nodeName,attr.length>0)for(var i in dom.attributes={},attr)console.log(attr[i]),dom.attributes[attr[i]]=obj.getAttribute(attr[i]);return $(obj).children().length>0?dom.children=domToJSON(obj):dom.textNode=$(obj).text(),dom}$(document).ready((function(e1){loadData(0)}));